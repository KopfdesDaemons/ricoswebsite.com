import{a as V}from"./chunk-DV7567WB.js";import"./chunk-JAPE7ESS.js";import{e as j,f as H,g as A}from"./chunk-2INIJ4YW.js";import{f as E,l as F,m as I,s as k,v as $,y as R}from"./chunk-HITV4YH6.js";import{$a as v,Ab as B,Bb as x,Cb as C,Db as o,Eb as a,Fb as b,Ib as T,Jb as p,Pb as s,Qa as i,Qb as r,Wb as w,Xb as L,Yb as d,Z as l,Zb as m,f as u,fb as _,jc as z,kc as D,lc as N,ob as M,rb as y,sb as S,u as P,wb as f,yb as h,zb as O}from"./chunk-OC3MPMC5.js";var G=()=>[import("./chunk-H2PAKHQ7.js").then(e=>e.BlogpostCardComponent)],J=()=>[],K=e=>[e];function Q(e,c){if(e&1&&b(0,"app-blogpost-card",8),e&2){let t=p().$implicit;f("postMeta",t.postMeta)}}function U(e,c){e&1&&(o(0,"li"),_(1,Q,1,1),M(2,1,G,null,null,null,null,null,null,1),y(),S(),a())}function W(e,c){if(e&1&&(o(0,"a",9),s(1),a()),e&2){let t=p().$index,n=p(2);f("routerLink",L(2,K,"/"+n.languageS.userLanguage+"/blog/page/"+(t+1))+"/."),i(),r(t+1)}}function X(e,c){if(e&1&&(o(0,"span"),s(1),a()),e&2){let t=p().$index;i(),r(t+1)}}function Y(e,c){if(e&1&&(o(0,"li"),_(1,W,2,4,"a",9)(2,X,2,1,"span"),a()),e&2){let t=c.$index,n=p(2);i(),h(n.currentPage!=t+1?1:-1),i(),h(n.currentPage===t+1?2:-1)}}function Z(e,c){if(e&1&&(o(0,"ul",7),x(1,Y,3,2,"li",null,O),a()),e&2){let t=p();i(),C(w(0,J).constructor(t.totalPages))}}var ut=(()=>{class e{constructor(){this.postS=l(V),this.languageS=l(R),this.route=l(k),this.title=l(I),this.meta=l(F),this.translate=l(z),this.postsList=[],this.currentPage=1,this.pageSize=5,this.sortOrder="desc",this.sortBy="date",this.totalPages=1}ngOnInit(){this.routeParamsSubscription=this.route.params.subscribe(()=>u(this,null,function*(){let t=this.route.snapshot.paramMap.get("page");t&&(this.currentPage=Number(t)),yield this.loadPostsList(),yield this.setMetaTags()}))}ngOnDestroy(){this.routeParamsSubscription&&this.routeParamsSubscription.unsubscribe()}setMetaTags(){return u(this,null,function*(){let t=yield P(this.translate.get("blog_h1"));this.title.setTitle(t),this.meta.addTag({name:"description",content:t})})}loadPostsList(){return u(this,null,function*(){try{let{posts:t,totalPages:n}=yield this.postS.loadPostList(this.languageS.userLanguage,this.currentPage,this.pageSize,this.sortOrder,this.sortBy);this.postsList=t,this.totalPages=n}catch(t){console.error(t),t instanceof E&&t.status===404&&this.languageS.userLanguage!=="en"&&(yield this.postS.loadPostList("en",this.currentPage,this.pageSize,this.sortOrder,this.sortBy))}})}sort(t){return u(this,null,function*(){let[n,g]=t.target.value.split(" ");this.sortBy=n,this.sortOrder=g,yield this.loadPostsList()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-blog"]],decls:23,vars:16,consts:[[1,"options"],[3,"change"],["value","date desc"],["value","date asc"],["value","title asc"],["value","title desc"],[1,"feed"],[1,"pagination"],[3,"postMeta"],[3,"routerLink"]],template:function(n,g){n&1&&(o(0,"main")(1,"section")(2,"h1"),s(3),d(4,"translate"),a(),o(5,"div",0)(6,"select",1),T("change",function(q){return g.sort(q)}),o(7,"option",2),s(8),d(9,"translate"),a(),o(10,"option",3),s(11),d(12,"translate"),a(),o(13,"option",4),s(14),d(15,"translate"),a(),o(16,"option",5),s(17),d(18,"translate"),a()()(),o(19,"ul",6),x(20,U,4,0,"li",null,B),a(),_(22,Z,3,1,"ul",7),a()()),n&2&&(i(3),r(m(4,6,"blog_h1")),i(5),r(m(9,8,"date_desc")),i(3),r(m(12,10,"date_asc")),i(3),r(m(15,12,"title_asc")),i(3),r(m(18,14,"title_desc")),i(3),C(g.postsList),i(2),h(g.totalPages>1?22:-1))},dependencies:[A,j,H,$,N,D],styles:["[_nghost-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:stretch}main[_ngcontent-%COMP%]{margin-bottom:auto;padding:3em 0 5em;background:var(--gradient)}section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:0 6vw;max-width:80em;margin:0 auto;width:100%;box-sizing:border-box}h1[_ngcontent-%COMP%]{font-size:clamp(34px,4vw,60px)}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}.options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5em;border:2px solid lightgrey;border-radius:.5rem;color:#000;background-color:#fff;min-width:5em}.feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding:0}.feed[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5em;padding:0;font-size:1.3em}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5em}"]})}}return e})();export{ut as BlogComponent};
