import{a as J}from"./chunk-AIZ2KDRY.js";import{a as A,b as V,c as G}from"./chunk-NJALLVZT.js";import"./chunk-PL55PVWG.js";import{a as H}from"./chunk-LFKVONCJ.js";import{b as N,c as R,d as j}from"./chunk-GYUCNXMX.js";import{f as I,l as $,m as k,s as q,u as z,v as D}from"./chunk-K6Z3VPJB.js";import{Ab as C,Bb as o,Cb as a,Db as b,Gb as B,Hb as c,Lb as T,Ob as p,Pb as d,Qb as w,Ra as i,Sb as L,Tb as E,Ub as F,Vb as g,Wb as u,_ as l,ab as y,f as m,fb as _,ob as v,qb as O,rb as S,u as P,vb as h,wb as f,xb as M,zb as x}from"./chunk-BAJSPIZF.js";var Q=()=>[import("./chunk-4Y5LRUNC.js").then(t=>t.BlogpostCardComponent)],U=()=>[],W=t=>[t],X=(t,s)=>({sortBy:t,sortOrder:s}),Y=(t,s)=>s.postMeta.description;function Z(t,s){if(t&1&&b(0,"app-blogpost-card",8),t&2){let e=c().$implicit;h("postMeta",e.postMeta)}}function tt(t,s){t&1&&(o(0,"li"),_(1,Z,1,1),v(2,1,Q,null,null,null,null,null,null,1),O(),S(),a())}function et(t,s){if(t&1&&(o(0,"a",9),p(1),a()),t&2){let e=c().$index,n=c(2);h("routerLink",E(3,W,"/"+n.languageS.userLanguage()+"/blog/page/"+(e+1)+"/."))("queryParams",F(5,X,n.sortBy,n.sortOrder)),i(),w("",e+1," ")}}function nt(t,s){if(t&1&&(o(0,"span"),p(1),a()),t&2){let e=c().$index;i(),d(e+1)}}function it(t,s){if(t&1&&(o(0,"li"),_(1,et,2,8,"a",9)(2,nt,2,1,"span"),a()),t&2){let e=s.$index,n=c(2);i(),f(n.currentPage!=e+1?1:-1),i(),f(n.currentPage===e+1?2:-1)}}function ot(t,s){if(t&1&&(o(0,"ul",7),x(1,it,3,2,"li",null,M),a()),t&2){let e=c();i(),C(L(0,U).constructor(e.totalPages))}}var Ct=(()=>{class t{constructor(){this.postS=l(J),this.languageS=l(H),this.route=l(q),this.router=l(z),this.title=l(k),this.meta=l($),this.translate=l(N),this.postsList=[],this.currentPage=1,this.pageSize=5,this.sortOrder="desc",this.sortBy="date",this.totalPages=1}ngOnInit(){this.routeParamsSubscription=this.route.params.subscribe(e=>m(this,null,function*(){let{page:n}=e;n&&(this.currentPage=Number(n)),yield this.loadPostsList()})),this.queryParamsSubscription=this.route.queryParams.subscribe(e=>m(this,null,function*(){let{sortBy:n,sortOrder:r}=e;(n==="date"||n==="title")&&(this.sortBy=n),(r==="asc"||r==="desc")&&(this.sortOrder=r),yield this.loadPostsList()}))}ngOnDestroy(){this.routeParamsSubscription?.unsubscribe(),this.queryParamsSubscription?.unsubscribe()}setMetaTags(){return m(this,null,function*(){let e=yield P(this.translate.get("blog_h1"));this.title.setTitle(e),this.meta.addTag({name:"description",content:e})})}loadPostsList(){return m(this,null,function*(){try{let{posts:e,totalPages:n}=yield this.postS.loadPostList(this.languageS.userLanguage(),this.currentPage,this.pageSize,this.sortOrder,this.sortBy);this.postsList=e,this.totalPages=n,yield this.setMetaTags()}catch(e){console.error(e),e instanceof I&&e.status===404&&this.languageS.userLanguage()!=="en"&&(yield this.postS.loadPostList("en",this.currentPage,this.pageSize,this.sortOrder,this.sortBy))}})}sort(e){return m(this,null,function*(){let[n,r]=e.target.value.split(" ");yield this.router.navigate([`/${this.languageS.userLanguage()}/blog/page/1`],{queryParams:{sortBy:n,sortOrder:r}})})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=y({type:t,selectors:[["app-blog"]],decls:23,vars:19,consts:[[1,"options"],[3,"change","value"],["value","date desc"],["value","date asc"],["value","title asc"],["value","title desc"],[1,"feed"],[1,"pagination"],[3,"postMeta"],[3,"routerLink","queryParams"]],template:function(n,r){n&1&&(o(0,"main")(1,"section")(2,"h1"),p(3),g(4,"translate"),a(),o(5,"div",0)(6,"select",1),B("change",function(K){return r.sort(K)}),o(7,"option",2),p(8),g(9,"translate"),a(),o(10,"option",3),p(11),g(12,"translate"),a(),o(13,"option",4),p(14),g(15,"translate"),a(),o(16,"option",5),p(17),g(18,"translate"),a()()(),o(19,"ul",6),x(20,tt,4,0,"li",null,Y),a(),_(22,ot,3,1,"ul",7),a()()),n&2&&(i(3),d(u(4,9,"blog_h1")),i(3),T("value","",r.sortBy," ",r.sortOrder,""),i(2),d(u(9,11,"date_desc")),i(3),d(u(12,13,"date_asc")),i(3),d(u(15,15,"title_asc")),i(3),d(u(18,17,"title_desc")),i(3),C(r.postsList),i(2),f(r.totalPages>1?22:-1))},dependencies:[G,A,V,D,j,R],styles:["[_nghost-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:stretch}main[_ngcontent-%COMP%]{margin-bottom:auto;padding:3em 0 5em;background:var(--gradient)}section[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;padding:0 6vw;max-width:80em;margin:0 auto;width:100%;box-sizing:border-box}h1[_ngcontent-%COMP%]{font-size:clamp(34px,4vw,60px)}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}.options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5em;border:2px solid lightgrey;border-radius:.5rem;color:#000;background-color:#fff;min-width:5em}.feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding:0;flex:1}.feed[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5em;padding:0;font-size:1.3em}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5em}"]})}}return t})();export{Ct as BlogComponent};
