import{a as A}from"./chunk-DV7567WB.js";import"./chunk-JAPE7ESS.js";import{e as R,f as j,g as H}from"./chunk-2INIJ4YW.js";import{f as L,l as E,m as F,s as I,v as $,y as N}from"./chunk-HITV4YH6.js";import{$a as M,Bb as x,Cb as C,Db as o,Eb as a,Fb as B,Ib as b,Jb as c,Pb as r,Qa as i,Qb as l,Wb as T,Xb as w,Yb as d,Z as p,Zb as m,f as u,fb as _,jc as k,kc as z,lc as D,ob as v,rb as S,sb as O,u as P,wb as h,yb as f,zb as y}from"./chunk-OC3MPMC5.js";var q=()=>[import("./chunk-LMJLSPEQ.js").then(e=>e.BlogpostCardComponent)],G=()=>[],J=e=>[e],K=(e,s)=>s.postMeta.title;function Q(e,s){if(e&1&&B(0,"app-blogpost-card",8),e&2){let t=c().$implicit;h("postMeta",t.postMeta)}}function U(e,s){e&1&&(o(0,"li"),_(1,Q,1,1),v(2,1,q,null,null,null,null,null,null,1),S(),O(),a())}function W(e,s){if(e&1&&(o(0,"a",9),r(1),a()),e&2){let t=c().$index,n=c(2);h("routerLink",w(2,J,"/"+n.languageS.userLanguage+"/blog/page/"+(t+1))+"/."),i(),l(t+1)}}function X(e,s){if(e&1&&(o(0,"span"),r(1),a()),e&2){let t=c().$index;i(),l(t+1)}}function Y(e,s){if(e&1&&(o(0,"li"),_(1,W,2,4,"a",9)(2,X,2,1,"span"),a()),e&2){let t=s.$index,n=c(2);i(),f(n.currentPage!=t+1?1:-1),i(),f(n.currentPage===t+1?2:-1)}}function Z(e,s){if(e&1&&(o(0,"ul",7),x(1,Y,3,2,"li",null,y),a()),e&2){let t=c();i(),C(T(0,G).constructor(t.totalPages))}}var ut=(()=>{class e{constructor(){this.postS=p(A),this.languageS=p(N),this.route=p(I),this.title=p(F),this.meta=p(E),this.translate=p(k),this.postsList=[],this.currentPage=1,this.pageSize=5,this.sortOrder="desc",this.sortBy="date",this.totalPages=1}ngOnInit(){this.routeParamsSubscription=this.route.params.subscribe(()=>u(this,null,function*(){let t=this.route.snapshot.paramMap.get("page");t&&(this.currentPage=Number(t)),yield this.loadPostsList(),yield this.setMetaTags()}))}ngOnDestroy(){this.routeParamsSubscription&&this.routeParamsSubscription.unsubscribe()}setMetaTags(){return u(this,null,function*(){let t=yield P(this.translate.get("blog_h1"));this.title.setTitle(t),this.meta.addTag({name:"description",content:t})})}loadPostsList(){return u(this,null,function*(){try{let{posts:t,totalPages:n}=yield this.postS.loadPostList(this.languageS.userLanguage,this.currentPage,this.pageSize,this.sortOrder,this.sortBy);this.postsList=t,this.totalPages=n}catch(t){console.error(t),t instanceof L&&t.status===404&&this.languageS.userLanguage!=="en"&&(yield this.postS.loadPostList("en",this.currentPage,this.pageSize,this.sortOrder,this.sortBy))}})}sort(t){return u(this,null,function*(){let[n,g]=t.target.value.split(" ");this.sortBy=n,this.sortOrder=g,yield this.loadPostsList()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=M({type:e,selectors:[["app-blog"]],decls:23,vars:16,consts:[[1,"options"],[3,"change"],["value","date desc"],["value","date asc"],["value","title asc"],["value","title desc"],[1,"feed"],[1,"pagination"],[3,"postMeta"],[3,"routerLink"]],template:function(n,g){n&1&&(o(0,"main")(1,"section")(2,"h1"),r(3),d(4,"translate"),a(),o(5,"div",0)(6,"select",1),b("change",function(V){return g.sort(V)}),o(7,"option",2),r(8),d(9,"translate"),a(),o(10,"option",3),r(11),d(12,"translate"),a(),o(13,"option",4),r(14),d(15,"translate"),a(),o(16,"option",5),r(17),d(18,"translate"),a()()(),o(19,"ul",6),x(20,U,4,0,"li",null,K),a(),_(22,Z,3,1,"ul",7),a()()),n&2&&(i(3),l(m(4,6,"blog_h1")),i(5),l(m(9,8,"date_desc")),i(3),l(m(12,10,"date_asc")),i(3),l(m(15,12,"title_asc")),i(3),l(m(18,14,"title_desc")),i(3),C(g.postsList),i(2),f(g.totalPages>1?22:-1))},dependencies:[H,R,j,$,D,z],styles:["[_nghost-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:stretch}main[_ngcontent-%COMP%]{margin-bottom:auto;padding:3em 0 5em;background:var(--gradient)}section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:0 6vw;max-width:80em;margin:0 auto;width:100%;box-sizing:border-box}h1[_ngcontent-%COMP%]{font-size:clamp(34px,4vw,60px)}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}.options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5em;border:2px solid lightgrey;border-radius:.5rem;color:#000;background-color:#fff;min-width:5em}.feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding:0}.feed[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5em;padding:0;font-size:1.3em}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5em}"]})}}return e})();export{ut as BlogComponent};
