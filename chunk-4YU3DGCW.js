import{a as ue}from"./chunk-3KEFHOY5.js";import"./chunk-YFVWPDYZ.js";import{a as ie,b as oe,c as ae,d as re,e as se,f as le,g as ce,h as pe,i as ge}from"./chunk-27JBSE44.js";import{a as ne}from"./chunk-TVT6NLNC.js";import"./chunk-MRP2LEQ3.js";import{b as Y,c as ee,d as te}from"./chunk-KK2A4E5N.js";import{c as H,g as Z,h as J,n as K,p as U,q as X}from"./chunk-AHQAFESL.js";import"./chunk-LOFVFHXP.js";import{$ as f,Ab as v,Eb as O,Gb as x,Ib as c,Jb as F,Kb as k,Ma as r,Mb as p,Nb as u,Ob as D,Pb as N,Qb as $,Rb as z,Tb as R,U as l,Vb as A,Wb as W,Xb as d,Yb as m,Za as Q,_,aa as B,cb as L,dc as j,ka as T,kb as E,lc as G,mb as q,nb as I,q as w,rb as y,sb as P,tb as V,vb as M,wb as b,xb as C,yb as o,zb as a}from"./chunk-5C5RMVSW.js";var de=["searchInput"],me=()=>[import("./chunk-ZLXXC5WK.js").then(t=>t.BlogpostCardComponent)],he=()=>[],_e=t=>[t],fe=(t,s)=>s.postMeta.description;function Ce(t,s){if(t&1){let e=O();o(0,"button",12),x("click",function(){_(e);let i=c();return i.searchQuery="",f(i.search())}),B(),o(1,"svg",13),v(2,"path",14),a()()}}function ye(t,s){if(t&1&&v(0,"app-blogpost-card",15),t&2){let e=c().$implicit;C("postMeta",e.postMeta)}}function Pe(t,s){t&1&&(o(0,"li"),L(1,ye,1,1),E(2,1,me,null,null,null,null,null,null,1),q(),I(),a())}function xe(t,s){if(t&1&&(o(0,"a",16),p(1),a()),t&2){let e=c().$index,n=c(2);C("routerLink",W(3,_e,"/"+n.languageS.userLanguage()+"/blog/page/"+(e+1)+"/."))("queryParams",n.getQueryParams()),r(),D("",e+1," ")}}function Me(t,s){if(t&1&&(o(0,"span"),p(1),a()),t&2){let e=c().$index;r(),u(e+1)}}function be(t,s){if(t&1&&(o(0,"li"),y(1,xe,2,5,"a",16)(2,Me,2,1,"span"),a()),t&2){let e=s.$index,n=c(2);r(),P(n.currentPage!==e+1?1:2)}}function ve(t,s){if(t&1&&(o(0,"ul",11),M(1,be,3,1,"li",null,V),a()),t&2){let e=c();r(),b(A(0,he).constructor(e.totalPages))}}var Ne=(()=>{class t{constructor(){this.postS=l(ue),this.languageS=l(ne),this.route=l(K),this.router=l(U),this.title=l(J),this.meta=l(Z),this.translate=l(Y),this.searchInput=j("searchInput",{}),this.postsList=T([],{}),this.currentPage=1,this.pageSize=5,this.sortOrder="desc",this.sortBy="date",this.totalPages=1,this.searchQuery="",G(()=>{this.searchQuery&&this.searchInput()?.nativeElement.focus()})}ngOnInit(){this.routeParamsSubscription=this.route.params.subscribe(async e=>{let{page:n}=e;n&&(this.currentPage=Number(n)),await this.loadPostsList()}),this.queryParamsSubscription=this.route.queryParams.subscribe(async e=>{let{sortBy:n,sortOrder:i,search:h}=e;(n==="date"||n==="title")&&(this.sortBy=n),(i==="asc"||i==="desc")&&(this.sortOrder=i),this.searchQuery=h||"",await this.loadPostsList()})}ngOnDestroy(){this.routeParamsSubscription?.unsubscribe(),this.queryParamsSubscription?.unsubscribe()}async setMetaTags(){let e=await w(this.translate.get("blog_h1"));this.title.setTitle(e),this.meta.addTag({name:"description",content:e})}async loadPostsList(){try{let{posts:e,totalPages:n}=await this.postS.loadPostList(this.languageS.userLanguage(),this.currentPage,this.pageSize,this.sortOrder,this.sortBy,[],"",this.searchQuery);this.postsList.set(e),this.totalPages=n,await this.setMetaTags()}catch(e){console.error(e),e instanceof H&&e.status===404&&this.languageS.userLanguage()!=="en"&&await this.postS.loadPostList("en",this.currentPage,this.pageSize,this.sortOrder,this.sortBy,[],"",this.searchQuery)}}getQueryParams(){let e={sortBy:this.sortBy,sortOrder:this.sortOrder};return this.searchQuery&&(e.search=this.searchQuery),e}async sort(e){let[n,i]=e.target.value.split(" ");this.sortBy=n,this.sortOrder=i,await this.router.navigate([`/${this.languageS.userLanguage()}/blog/page/1`],{queryParams:this.getQueryParams()})}async search(){await this.router.navigate([`/${this.languageS.userLanguage()}/blog/page/1`],{queryParams:this.getQueryParams()})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Q({type:t,selectors:[["app-blog"]],viewQuery:function(n,i){n&1&&F(i.searchInput,de,5),n&2&&k()},decls:28,vars:24,consts:[["searchInput",""],[1,"options"],[1,"search",3,"submit"],["type","text","name","searchQuery",3,"ngModelChange","ngModel","placeholder"],["type","button"],[3,"change","value"],["value","date desc"],["value","date asc"],["value","title asc"],["value","title desc"],[1,"feed"],[1,"pagination"],["type","button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","width","24"],["fill","currentColor","d","m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"],[3,"postMeta"],[3,"routerLink","queryParams"]],template:function(n,i){if(n&1){let h=O();o(0,"main")(1,"section")(2,"h1"),p(3),d(4,"translate"),a(),o(5,"div",1)(6,"form",2),x("submit",function(g){return _(h),g.preventDefault(),f(i.search())}),o(7,"input",3,0),d(9,"translate"),z("ngModelChange",function(g){return _(h),$(i.searchQuery,g)||(i.searchQuery=g),f(g)}),a(),y(10,Ce,3,0,"button",4),a(),o(11,"select",5),x("change",function(g){return _(h),f(i.sort(g))}),o(12,"option",6),p(13),d(14,"translate"),a(),o(15,"option",7),p(16),d(17,"translate"),a(),o(18,"option",8),p(19),d(20,"translate"),a(),o(21,"option",9),p(22),d(23,"translate"),a()()(),o(24,"ul",10),M(25,Pe,4,0,"li",null,fe),a(),y(27,ve,3,1,"ul",11),a()()}n&2&&(r(3),u(m(4,12,"blog_h1")),r(4),N("ngModel",i.searchQuery),C("placeholder",m(9,14,"search_post")),r(3),P(i.searchQuery.length>0?10:-1),r(),C("value",R("",i.sortBy," ",i.sortOrder)),r(2),u(m(14,16,"date_desc")),r(3),u(m(17,18,"date_asc")),r(3),u(m(20,20,"title_asc")),r(3),u(m(23,22,"title_desc")),r(3),b(i.postsList()),r(2),P(i.totalPages>1?27:-1))},dependencies:[ge,le,ce,pe,ie,oe,ae,se,re,X,te,ee],styles:["[_nghost-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:stretch}main[_ngcontent-%COMP%]{margin-bottom:auto;padding:3em 0 5em;background:var(--gradient)}section[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;padding:0 6vw;max-width:80em;margin:0 auto;width:100%;box-sizing:border-box}h1[_ngcontent-%COMP%]{font-size:clamp(34px,4vw,60px)}.options[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;gap:1em;width:100%;--background-input: rgb(36, 36, 41)}.options[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:inline;position:relative}.options[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:.5em;font-size:1.3em;border-radius:20px;border:none}.options[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;background-color:transparent;border:none}.options[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#797979;cursor:pointer}.options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5em;border:2px solid lightgrey;border-radius:.5rem;color:#000;background-color:#fff;min-width:5em}.feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding:0;flex:1}.feed[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5em;padding:0;font-size:1.3em}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5em}"],changeDetection:0})}}return t})();export{Ne as BlogComponent};
