import{a as K}from"./chunk-45RHNQJU.js";import{a as V,b as G,c as J}from"./chunk-Y2VEPEJZ.js";import"./chunk-YFVWPDYZ.js";import{a as A}from"./chunk-FRVLBCP4.js";import"./chunk-4IBARBHX.js";import{b as R,c as j,d as H}from"./chunk-2D7XZ7H7.js";import{c as D,g as $,h as k,n as q,p as z,q as N}from"./chunk-OLHXSHJF.js";import"./chunk-HY33QVTP.js";import{Ab as B,Gb as T,Ib as p,Lb as c,Ma as i,Mb as d,Nb as L,Pb as w,Rb as E,Sb as F,Tb as I,U as l,Ub as g,Vb as m,Za as y,cb as v,ka as P,kb as O,mb as S,nb as M,q as C,rb as u,sb as _,tb as b,vb as f,wb as x,xb as h,yb as o,zb as a}from"./chunk-OQZGMZJZ.js";var U=()=>[import("./chunk-L5ZIJMH5.js").then(t=>t.BlogpostCardComponent)],W=()=>[],X=t=>[t],Y=(t,s)=>({sortBy:t,sortOrder:s}),Z=(t,s)=>s.postMeta.description;function tt(t,s){if(t&1&&B(0,"app-blogpost-card",8),t&2){let e=p().$implicit;h("postMeta",e.postMeta)}}function et(t,s){t&1&&(o(0,"li"),v(1,tt,1,1),O(2,1,U,null,null,null,null,null,null,1),S(),M(),a())}function nt(t,s){if(t&1&&(o(0,"a",9),c(1),a()),t&2){let e=p().$index,n=p(2);h("routerLink",F(3,X,"/"+n.languageS.userLanguage()+"/blog/page/"+(e+1)+"/."))("queryParams",I(5,Y,n.sortBy,n.sortOrder)),i(),L("",e+1," ")}}function it(t,s){if(t&1&&(o(0,"span"),c(1),a()),t&2){let e=p().$index;i(),d(e+1)}}function ot(t,s){if(t&1&&(o(0,"li"),u(1,nt,2,8,"a",9),u(2,it,2,1,"span"),a()),t&2){let e=s.$index,n=p(2);i(),_(n.currentPage!=e+1?1:-1),i(),_(n.currentPage===e+1?2:-1)}}function at(t,s){if(t&1&&(o(0,"ul",7),f(1,ot,3,2,"li",null,b),a()),t&2){let e=p();i(),x(E(0,W).constructor(e.totalPages))}}var yt=(()=>{class t{constructor(){this.postS=l(K),this.languageS=l(A),this.route=l(q),this.router=l(z),this.title=l(k),this.meta=l($),this.translate=l(R),this.postsList=P([],{}),this.currentPage=1,this.pageSize=5,this.sortOrder="desc",this.sortBy="date",this.totalPages=1}ngOnInit(){this.routeParamsSubscription=this.route.params.subscribe(async e=>{let{page:n}=e;n&&(this.currentPage=Number(n)),await this.loadPostsList()}),this.queryParamsSubscription=this.route.queryParams.subscribe(async e=>{let{sortBy:n,sortOrder:r}=e;(n==="date"||n==="title")&&(this.sortBy=n),(r==="asc"||r==="desc")&&(this.sortOrder=r),await this.loadPostsList()})}ngOnDestroy(){this.routeParamsSubscription?.unsubscribe(),this.queryParamsSubscription?.unsubscribe()}async setMetaTags(){let e=await C(this.translate.get("blog_h1"));this.title.setTitle(e),this.meta.addTag({name:"description",content:e})}async loadPostsList(){try{let{posts:e,totalPages:n}=await this.postS.loadPostList(this.languageS.userLanguage(),this.currentPage,this.pageSize,this.sortOrder,this.sortBy);this.postsList.set(e),this.totalPages=n,await this.setMetaTags()}catch(e){console.error(e),e instanceof D&&e.status===404&&this.languageS.userLanguage()!=="en"&&await this.postS.loadPostList("en",this.currentPage,this.pageSize,this.sortOrder,this.sortBy)}}async sort(e){let[n,r]=e.target.value.split(" ");await this.router.navigate([`/${this.languageS.userLanguage()}/blog/page/1`],{queryParams:{sortBy:n,sortOrder:r}})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=y({type:t,selectors:[["app-blog"]],decls:23,vars:19,consts:[[1,"options"],[3,"change","value"],["value","date desc"],["value","date asc"],["value","title asc"],["value","title desc"],[1,"feed"],[1,"pagination"],[3,"postMeta"],[3,"routerLink","queryParams"]],template:function(n,r){n&1&&(o(0,"main")(1,"section")(2,"h1"),c(3),g(4,"translate"),a(),o(5,"div",0)(6,"select",1),T("change",function(Q){return r.sort(Q)}),o(7,"option",2),c(8),g(9,"translate"),a(),o(10,"option",3),c(11),g(12,"translate"),a(),o(13,"option",4),c(14),g(15,"translate"),a(),o(16,"option",5),c(17),g(18,"translate"),a()()(),o(19,"ul",6),f(20,et,4,0,"li",null,Z),a(),u(22,at,3,1,"ul",7),a()()),n&2&&(i(3),d(m(4,9,"blog_h1")),i(3),h("value",w("",r.sortBy," ",r.sortOrder)),i(2),d(m(9,11,"date_desc")),i(3),d(m(12,13,"date_asc")),i(3),d(m(15,15,"title_asc")),i(3),d(m(18,17,"title_desc")),i(3),x(r.postsList()),i(2),_(r.totalPages>1?22:-1))},dependencies:[J,V,G,N,H,j],styles:["[_nghost-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:stretch}main[_ngcontent-%COMP%]{margin-bottom:auto;padding:3em 0 5em;background:var(--gradient)}section[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;padding:0 6vw;max-width:80em;margin:0 auto;width:100%;box-sizing:border-box}h1[_ngcontent-%COMP%]{font-size:clamp(34px,4vw,60px)}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}.options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5em;border:2px solid lightgrey;border-radius:.5rem;color:#000;background-color:#fff;min-width:5em}.feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding:0;flex:1}.feed[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5em;padding:0;font-size:1.3em}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5em}"],changeDetection:0})}}return t})();export{yt as BlogComponent};
