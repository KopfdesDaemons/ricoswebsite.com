<!DOCTYPE html><html lang="de" data-beasties-container><head>
        <meta charset="utf-8">
        <title>Tutorial: Entwicklung eines Desklets für den Cinnamon Desktop</title>
        <base href="/">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/x-icon" href="favicon.ico">
    <style>:root{--border-color: rgb(49, 49, 150);--body: rgb(22, 22, 24);--section: rgb(26, 25, 46);--font-color: rgb(238, 238, 238);--gradient: linear-gradient( 90deg, #1a192e 0%, rgba(49, 49, 150, 1) 75%, rgba(26, 25, 46, 1) 100% );--sidemenu-width: 16em;--header-height: 5rem}body{background-color:var(--body);margin:0;font-family:sans-serif}@media only screen and (max-width:800px){body:has(.menuIsOpen){overflow:hidden}}a,body{color:var(--font-color)}html{scroll-behavior:smooth}html,body{margin:0;height:100%;min-height:100%;scrollbar-color:rgb(117,117,117) transparent}h1{font-size:clamp(34px,4vw,40px)}main{display:flex;flex-direction:column;justify-content:flex-start;min-height:100vh}section{display:flex;flex-direction:column;justify-content:flex-start;align-items:center}.sectionSpacer{padding:0 2%;max-width:80em}
</style><link rel="stylesheet" href="styles-3DXPQYLZ.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-3DXPQYLZ.css"></noscript><style ng-app-id="ng">.menuIsOpen[_ngcontent-ng-c2207563736]{padding-left:0}.content[_ngcontent-ng-c2207563736]{transition:padding-left .1s ease-in-out}@media only screen and (min-width:1100px){.content[_ngcontent-ng-c2207563736]{padding-left:var(--sidemenu-width);padding-top:0}.menuIsOpen[_ngcontent-ng-c2207563736]{padding-left:0}}</style><style ng-app-id="ng">.websiteName[_ngcontent-ng-c3330810417]   [_ngcontent-ng-c3330810417]:nth-child(2){background:-webkit-linear-gradient(#eee,#2525d9);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}header[_ngcontent-ng-c3330810417]{font-size:clamp(14px,5vw,24px);box-sizing:border-box;display:flex;vertical-align:middle;height:var(--header-height);position:absolute;z-index:2}header.menuIsOpen[_ngcontent-ng-c3330810417]{position:fixed}@media only screen and (min-width:1100px){header[_ngcontent-ng-c3330810417]{position:fixed}header.menuIsOpen[_ngcontent-ng-c3330810417]{position:absolute}}@media only screen and (min-width:1900px){header.menuIsOpen[_ngcontent-ng-c3330810417]{position:fixed}}header[_ngcontent-ng-c3330810417]   a[_ngcontent-ng-c3330810417]{text-decoration:none}header[_ngcontent-ng-c3330810417]   .websiteName[_ngcontent-ng-c3330810417]{display:flex;align-items:center}header[_ngcontent-ng-c3330810417]   .toggle_sidemenu_button[_ngcontent-ng-c3330810417]{all:unset;color:var(--font-color);cursor:pointer;transition:all .1s;width:var(--header-height);display:flex;justify-content:center;align-items:center;padding:1em;box-sizing:border-box}header[_ngcontent-ng-c3330810417]   .toggle_sidemenu_button[_ngcontent-ng-c3330810417]:hover{transform:scale(1.3)}header[_ngcontent-ng-c3330810417]   .toggle_sidemenu_button[_ngcontent-ng-c3330810417]:focus-visible{outline:1px solid}</style><style ng-app-id="ng">.closingDiv[_ngcontent-ng-c237836873]{width:100vw;height:100vh;position:fixed;z-index:1;display:none}@media only screen and (max-width:1100px){.closingDiv.sidemenuOpen[_ngcontent-ng-c237836873]{display:block}}aside[_ngcontent-ng-c237836873]{position:fixed;top:0;left:0;height:100dvh;z-index:1;width:var(--sidemenu-width);transition:all .1s ease-in-out;box-sizing:border-box;background-color:var(--section);display:flex;transition-behavior:allow-discrete}aside.sidemenuOpen[_ngcontent-ng-c237836873]{transform:translate(calc(-1 * var(--sidemenu-width)));display:flex}@media only screen and (max-width:1100px){aside[_ngcontent-ng-c237836873]{transform:translate(calc(-1 * var(--sidemenu-width)));display:none}aside.sidemenuOpen[_ngcontent-ng-c237836873]{display:flex;transform:translate(0)}@starting-style{aside.sidemenuOpen[_ngcontent-ng-c237836873]{transform:translate(calc(-1 * var(--sidemenu-width)))}}}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]{margin-top:5em;padding:0 1em;display:flex;flex-direction:column;overflow-y:auto;width:100%}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   ul[_ngcontent-ng-c237836873]{padding:0;margin:0;display:flex;flex-direction:column}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   ul[_ngcontent-ng-c237836873]   li[_ngcontent-ng-c237836873]{list-style:none}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   ul[_ngcontent-ng-c237836873]   hr[_ngcontent-ng-c237836873]{width:100%}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   ul[_ngcontent-ng-c237836873]   a[_ngcontent-ng-c237836873]{border-radius:10px;padding:1em .5em;flex:1 1 auto;text-decoration:none;display:flex;gap:1em;align-items:center;font-size:1.2em;justify-content:center;text-align:center;text-wrap:balance}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   ul[_ngcontent-ng-c237836873]   a[_ngcontent-ng-c237836873]   svg[_ngcontent-ng-c237836873]{height:1.2em}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   ul[_ngcontent-ng-c237836873]   a[_ngcontent-ng-c237836873]:hover{background-color:#1c2e64}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   .languageSetter[_ngcontent-ng-c237836873]{display:flex;flex-direction:column;gap:.5em;margin-top:auto;margin-bottom:1em;position:relative}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   .languageSetter[_ngcontent-ng-c237836873]   input[_ngcontent-ng-c237836873]{position:absolute;opacity:0}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   .languageSetter[_ngcontent-ng-c237836873]   input[_ngcontent-ng-c237836873]:checked + label[_ngcontent-ng-c237836873]{border:solid 1px rgb(109,109,109)}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   .languageSetter[_ngcontent-ng-c237836873]   input[_ngcontent-ng-c237836873]:focus-visible + label[_ngcontent-ng-c237836873]{outline:solid 1px}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   .languageSetter[_ngcontent-ng-c237836873]   label[_ngcontent-ng-c237836873]{display:flex;align-items:center;gap:.5em;-webkit-user-select:none;user-select:none;border:solid 1px transparent;padding:.2em;cursor:pointer}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   .languageSetter[_ngcontent-ng-c237836873]   label[_ngcontent-ng-c237836873]   svg[_ngcontent-ng-c237836873]{height:2em}aside[_ngcontent-ng-c237836873]   .sidemenuContent[_ngcontent-ng-c237836873]   .languageSetter[_ngcontent-ng-c237836873]   label[_ngcontent-ng-c237836873]:hover{background-color:#030318}</style><style ng-app-id="ng">footer[_ngcontent-ng-c1514226587]{font-size:clamp(12px,5vw,14px);padding:4vw;background-color:var(--section);display:flex;flex-wrap:wrap;gap:2em}footer[_ngcontent-ng-c1514226587]   .linkGroup[_ngcontent-ng-c1514226587]{padding:1em}footer[_ngcontent-ng-c1514226587]   .linkGroup[_ngcontent-ng-c1514226587]   h2[_ngcontent-ng-c1514226587]{font-size:1.3em;margin:0;color:#cef5f5}footer[_ngcontent-ng-c1514226587]   .linkGroup[_ngcontent-ng-c1514226587]   ul[_ngcontent-ng-c1514226587]{list-style:none;padding-left:.8em}footer[_ngcontent-ng-c1514226587]   .linkGroup[_ngcontent-ng-c1514226587]   ul[_ngcontent-ng-c1514226587]   li[_ngcontent-ng-c1514226587]{display:flex;margin-top:.5em;padding:.2em 0}footer[_ngcontent-ng-c1514226587]   .linkGroup[_ngcontent-ng-c1514226587]   ul[_ngcontent-ng-c1514226587]   li[_ngcontent-ng-c1514226587]   svg[_ngcontent-ng-c1514226587]{margin-right:.5em;height:1.5em}footer[_ngcontent-ng-c1514226587]   .linkGroup[_ngcontent-ng-c1514226587]   ul[_ngcontent-ng-c1514226587]   li[_ngcontent-ng-c1514226587]   button[_ngcontent-ng-c1514226587]{border:none;background:none;color:var(--font-color);padding:0;font-size:1em;text-decoration:underline;cursor:pointer}</style><style ng-app-id="ng">pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#959dcb;background:#292d3e}.hljs ::selection,.hljs::selection{background-color:#32374d;color:#959dcb}.hljs-comment{color:#676e95}.hljs-tag{color:#8796b0}.hljs-operator,.hljs-punctuation,.hljs-subst{color:#959dcb}.hljs-operator{opacity:.7}.hljs-bullet,.hljs-deletion,.hljs-name,.hljs-selector-tag,.hljs-template-variable,.hljs-variable{color:#f07178}.hljs-attr,.hljs-link,.hljs-literal,.hljs-number,.hljs-symbol,.hljs-variable.constant_{color:#f78c6c}.hljs-class .hljs-title,.hljs-title,.hljs-title.class_{color:#ffcb6b}.hljs-strong{font-weight:700;color:#ffcb6b}.hljs-addition,.hljs-code,.hljs-string,.hljs-title.class_.inherited__{color:#c3e88d}.hljs-built_in,.hljs-doctag,.hljs-keyword.hljs-atrule,.hljs-quote,.hljs-regexp{color:#89ddff}.hljs-attribute,.hljs-function .hljs-title,.hljs-section,.hljs-title.function_,.ruby .hljs-property{color:#82aaff}.diff .hljs-meta,.hljs-keyword,.hljs-template-tag,.hljs-type{color:#c792ea}.hljs-emphasis{color:#c792ea;font-style:italic}.hljs-meta,.hljs-meta .hljs-keyword,.hljs-meta .hljs-string{color:#ff5370}.hljs-meta .hljs-keyword,.hljs-meta-keyword{font-weight:700}main{padding-bottom:3em;text-wrap:pretty}main header{display:flex;justify-content:center;padding:1em 4%;text-align:center;overflow:hidden;background:var(--gradient)}main header img{max-width:100%;height:auto;animation:grow .5s ease-out;aspect-ratio:16/9;object-fit:contain}@media only screen and (max-width:1100px){main header{padding-top:var(--header-height)}}main header time{float:right;font-style:italic;font-size:.8em}main header .description{max-width:90%;margin:0 auto;font-size:1.2em}@keyframes grow{0%{transform:scale(0)}to{transform:scale(1)}}main .sectionSpacer{max-width:60em;flex:1;width:100%;box-sizing:border-box}@media only screen and (max-width:800px){main .sectionSpacer{padding:0}}main section{flex-direction:unset;justify-content:center}main article{min-height:40em;line-height:1.5em;margin-bottom:4em;padding:clamp(1em,2vw,2em);overflow:auto;width:100%;box-sizing:border-box}main article ul{padding-left:1.5em}main article h2,main article h3,main article a{color:#88f}main article h1,main article h2,main article h3,main article h4{margin:1em 0 0;line-height:1.2em}main article h2{font-size:2em}main article .h2-underlined{border-bottom:solid 1px #8888ff;padding-bottom:.5em;padding-top:1em}main article img{max-width:100%}main article img:hover{filter:brightness(.8)}main article p>code,main article li>code{background-color:#15275a;padding:.4em;border-radius:4px}main article pre{background:#292d3e;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;line-height:1em;padding:1em;border-radius:12px;max-width:100%;overflow-x:auto;font-size:.8em;font-size:1.2em;margin-bottom:1em}main article pre+.toolbar{opacity:unset;right:.8em;top:.8em}main article pre+.toolbar button{padding:.5em;border-radius:unset;font-size:1em;cursor:pointer;border-radius:6px}main article pre+.toolbar button:hover{background-color:#323242}main article pre:hover{border-color:#1f1f9e}main article .linkButton{font-size:1.4em;padding:.7em;background-color:#1f1d57;border-radius:24px;cursor:pointer;text-decoration:none;color:#a8a8fc;transition:all .25s;display:inline-block}main article .linkButton:hover{background-color:#2d2b5f}main #disqus_thread{min-height:500px}main .codepen:has(.codePenConsentButton){flex-direction:column}main .codePenConsentButton{padding:1em;background-color:#c1c0ff;border-radius:4px;border:3px solid transparent;cursor:pointer;display:flex;gap:.5em;font-size:1.2em;transition:all .25s;margin:0 auto}main .codePenConsentButton:hover{color:var(--font-color);border-color:#c1c0ff;background-color:transparent}main .codePenConsentButton+p{font-size:.8em;text-wrap:balance;text-align:center}
/*!
  Theme: Material Palenight
  Author: Nate Peterson
  License: ~ MIT (or more permissive) [via base16-schemes-source]
  Maintainer: @highlightjs/core-team
  Version: 2021.09.0
*/
</style><meta property="og:title" content="Tutorial: Entwicklung eines Desklets für den Cinnamon Desktop"><meta property="og:type" content="article"><meta property="og:url" content="https://ricoswebsite.com/de/blogpost/desklet-tutorial"><meta property="og:author" content="Rico"><meta property="article:published_time" content="2025-10-25T00:00:00.000Z"><meta property="og:description" content="Eine Dokumentation für die Entwicklung eines Desklets für den Cinnamon Desktop."><meta name="description" content="Eine Dokumentation für die Entwicklung eines Desklets für den Cinnamon Desktop."><meta name="keywords" content="Cinnamon, Linux"><meta property="og:image" content="https://ricoswebsite.com//images/desklet-tutorial.avif"></head>

    <body><!--nghm--><script type="text/javascript" id="ng-event-dispatch-contract">(()=>{function p(t,n,r,o,e,i,f,m){return{eventType:t,event:n,targetElement:r,eic:o,timeStamp:e,eia:i,eirp:f,eiack:m}}function u(t){let n=[],r=e=>{n.push(e)};return{c:t,q:n,et:[],etc:[],d:r,h:e=>{r(p(e.type,e,e.target,t,Date.now()))}}}function s(t,n,r){for(let o=0;o<n.length;o++){let e=n[o];(r?t.etc:t.et).push(e),t.c.addEventListener(e,t.h,r)}}function c(t,n,r,o,e=window){let i=u(t);e._ejsas||(e._ejsas={}),e._ejsas[n]=i,s(i,r),s(i,o,!0)}window.__jsaction_bootstrap=c;})();
</script><script>window.__jsaction_bootstrap(document.body,"ng",["focusout","click","keydown"],[]);</script>
        <app-root ng-version="21.0.1" _nghost-ng-c2207563736 ngh="3" ng-server-context="ssg"><!----><app-header _ngcontent-ng-c2207563736 _nghost-ng-c3330810417 jsaction="click:;keydown:;" ngb="d0" ngh="0"><header _ngcontent-ng-c3330810417 class><button _ngcontent-ng-c3330810417 aria-label="toggle sidemenu" class="toggle_sidemenu_button" jsaction="click:;" ngb="d0"><svg _ngcontent-ng-c3330810417="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path _ngcontent-ng-c3330810417="" fill="currentColor" d="M96 160C96 142.3 110.3 128 128 128L512 128C529.7 128 544 142.3 544 160C544 177.7 529.7 192 512 192L128 192C110.3 192 96 177.7 96 160zM96 320C96 302.3 110.3 288 128 288L512 288C529.7 288 544 302.3 544 320C544 337.7 529.7 352 512 352L128 352C110.3 352 96 337.7 96 320zM544 480C544 497.7 529.7 512 512 512L128 512C110.3 512 96 497.7 96 480C96 462.3 110.3 448 128 448L512 448C529.7 448 544 462.3 544 480z"/></svg></button><a _ngcontent-ng-c3330810417 routerlink="/" class="websiteName" href="/" jsaction="click:;" ngb="d0"><span _ngcontent-ng-c3330810417>Ricos</span><span _ngcontent-ng-c3330810417> Website</span></a></header></app-header><!--ngh=d0--><div _ngcontent-ng-c2207563736 class="content"><!----><!----><app-sidemenu _ngcontent-ng-c2207563736 _nghost-ng-c237836873 ngh="0" jsaction="focusout:;"><div _ngcontent-ng-c237836873 class="closingDiv" jsaction="click:;"></div><aside _ngcontent-ng-c237836873 side class jsaction="click:;"><div _ngcontent-ng-c237836873 class="sidemenuContent"><nav _ngcontent-ng-c237836873><ul _ngcontent-ng-c237836873><li _ngcontent-ng-c237836873><a _ngcontent-ng-c237836873 routerlink="/" href="/" jsaction="click:;"><svg _ngcontent-ng-c237836873="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path _ngcontent-ng-c237836873="" fill="currentColor" d="m 341.8,72.6 c -12.3,-11.4 -31.3,-11.4 -43.5,0 l -224,208 c -9.6,9 -12.8,22.9 -8,35.1 4.8,12.2 16.5,20.3 29.7,20.3 h 16 v 176 c 0,35.3 28.7,64 64,64 h 288 c 35.3,0 64,-28.7 64,-64 V 336 h 16 c 13.2,0 25,-8.1 29.8,-20.3 4.8,-12.2 1.6,-26.2 -8,-35.1 z" id="path2" sodipodi:nodetypes="cccsscsssscsscc"/></svg><span _ngcontent-ng-c237836873>Home</span></a></li><li _ngcontent-ng-c237836873><a _ngcontent-ng-c237836873 href="https://github.com/KopfdesDaemons" target="_blank" jsaction="click:;"><svg _ngcontent-ng-c237836873="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path _ngcontent-ng-c237836873="" fill="currentColor" d="M237.9 461.4C237.9 463.4 235.6 465 232.7 465C229.4 465.3 227.1 463.7 227.1 461.4C227.1 459.4 229.4 457.8 232.3 457.8C235.3 457.5 237.9 459.1 237.9 461.4zM206.8 456.9C206.1 458.9 208.1 461.2 211.1 461.8C213.7 462.8 216.7 461.8 217.3 459.8C217.9 457.8 216 455.5 213 454.6C210.4 453.9 207.5 454.9 206.8 456.9zM251 455.2C248.1 455.9 246.1 457.8 246.4 460.1C246.7 462.1 249.3 463.4 252.3 462.7C255.2 462 257.2 460.1 256.9 458.1C256.6 456.2 253.9 454.9 251 455.2zM316.8 72C178.1 72 72 177.3 72 316C72 426.9 141.8 521.8 241.5 555.2C254.3 557.5 258.8 549.6 258.8 543.1C258.8 536.9 258.5 502.7 258.5 481.7C258.5 481.7 188.5 496.7 173.8 451.9C173.8 451.9 162.4 422.8 146 415.3C146 415.3 123.1 399.6 147.6 399.9C147.6 399.9 172.5 401.9 186.2 425.7C208.1 464.3 244.8 453.2 259.1 446.6C261.4 430.6 267.9 419.5 275.1 412.9C219.2 406.7 162.8 398.6 162.8 302.4C162.8 274.9 170.4 261.1 186.4 243.5C183.8 237 175.3 210.2 189 175.6C209.9 169.1 258 202.6 258 202.6C278 197 299.5 194.1 320.8 194.1C342.1 194.1 363.6 197 383.6 202.6C383.6 202.6 431.7 169 452.6 175.6C466.3 210.3 457.8 237 455.2 243.5C471.2 261.2 481 275 481 302.4C481 398.9 422.1 406.6 366.2 412.9C375.4 420.8 383.2 435.8 383.2 459.3C383.2 493 382.9 534.7 382.9 542.9C382.9 549.4 387.5 557.3 400.2 555C500.2 521.8 568 426.9 568 316C568 177.3 455.5 72 316.8 72zM169.2 416.9C167.9 417.9 168.2 420.2 169.9 422.1C171.5 423.7 173.8 424.4 175.1 423.1C176.4 422.1 176.1 419.8 174.4 417.9C172.8 416.3 170.5 415.6 169.2 416.9zM158.4 408.8C157.7 410.1 158.7 411.7 160.7 412.7C162.3 413.7 164.3 413.4 165 412C165.7 410.7 164.7 409.1 162.7 408.1C160.7 407.5 159.1 407.8 158.4 408.8zM190.8 444.4C189.2 445.7 189.8 448.7 192.1 450.6C194.4 452.9 197.3 453.2 198.6 451.6C199.9 450.3 199.3 447.3 197.3 445.4C195.1 443.1 192.1 442.8 190.8 444.4zM179.4 429.7C177.8 430.7 177.8 433.3 179.4 435.6C181 437.9 183.7 438.9 185 437.9C186.6 436.6 186.6 434 185 431.7C183.6 429.4 181 428.4 179.4 429.7z"/></svg><span _ngcontent-ng-c237836873>GitHub</span></a></li><li _ngcontent-ng-c237836873><hr _ngcontent-ng-c237836873><a _ngcontent-ng-c237836873 href="/de/blog/." jsaction="click:;"><span _ngcontent-ng-c237836873>Blog</span></a></li><li _ngcontent-ng-c237836873><hr _ngcontent-ng-c237836873><a _ngcontent-ng-c237836873 fragment="projectsSection" href="/de/projects/page/1/.#projectsSection" jsaction="click:;"><span _ngcontent-ng-c237836873>Portfolio</span></a><hr _ngcontent-ng-c237836873></li><li _ngcontent-ng-c237836873><a _ngcontent-ng-c237836873 href="/de/blogpost/css-gallery/." jsaction="click:;"><span _ngcontent-ng-c237836873>CSS Gallery</span></a></li><li _ngcontent-ng-c237836873><a _ngcontent-ng-c237836873 href="/de/blogpost/about-this-website/." jsaction="click:;"><span _ngcontent-ng-c237836873>Über diese Webseite</span></a></li></ul></nav><fieldset _ngcontent-ng-c237836873 class="languageSetter"><legend _ngcontent-ng-c237836873>Sprache:</legend><div _ngcontent-ng-c237836873><input _ngcontent-ng-c237836873 type="radio" id="german" name="language" value="de" checked jsaction="click:;"><label _ngcontent-ng-c237836873 for="german"><svg _ngcontent-ng-c237836873="" xmlns="http://www.w3.org/2000/svg" id="flag-icons-de" viewBox="0 0 640 480" role="img" aria-labelledby="german-flag"><title _ngcontent-ng-c237836873="" id="german-flag">Flagge von Deutschland</title><path _ngcontent-ng-c237836873="" fill="#fc0" d="M0 320h640v160H0z"/><path _ngcontent-ng-c237836873="" fill="#000001" d="M0 0h640v160H0z"/><path _ngcontent-ng-c237836873="" fill="red" d="M0 160h640v160H0z"/></svg><span _ngcontent-ng-c237836873>German</span></label></div><div _ngcontent-ng-c237836873><input _ngcontent-ng-c237836873 type="radio" id="english" name="language" value="en" jsaction="click:;"><label _ngcontent-ng-c237836873 for="english"><svg _ngcontent-ng-c237836873="" xmlns="http://www.w3.org/2000/svg" id="flag-icons-us" viewBox="0 0 640 480" role="img" aria-labelledby="us-flag"><title _ngcontent-ng-c237836873="" id="us-flag">Flagge der USA</title><path _ngcontent-ng-c237836873="" fill="#bd3d44" d="M0 0h640v480H0"/><path _ngcontent-ng-c237836873="" stroke="#fff" stroke-width="37" d="M0 55.3h640M0 129h640M0 203h640M0 277h640M0 351h640M0 425h640"/><path _ngcontent-ng-c237836873="" fill="#192f5d" d="M0 0h364.8v258.5H0"/><marker _ngcontent-ng-c237836873="" id="us-a" markerHeight="30" markerWidth="30"><path _ngcontent-ng-c237836873="" fill="#fff" d="m14 0 9 27L0 10h28L5 27z"/></marker><path _ngcontent-ng-c237836873="" fill="none" marker-mid="url(#us-a)" d="m0 0 16 11h61 61 61 61 60L47 37h61 61 60 61L16 63h61 61 61 61 60L47 89h61 61 60 61L16 115h61 61 61 61 60L47 141h61 61 60 61L16 166h61 61 61 61 60L47 192h61 61 60 61L16 218h61 61 61 61 60z"/></svg><span _ngcontent-ng-c237836873>English</span></label></div></fieldset></div></aside></app-sidemenu><router-outlet _ngcontent-ng-c2207563736></router-outlet><app-blog-post ngh="1"><main><header><div class="sectionSpacer"><img height="495" width="880" alt="Tutorial: Entwicklung eines Desklets für den Cinnamon Desktop" src="/images/desklet-tutorial.avif"><!----><h1>Tutorial: Entwicklung eines Desklets für den Cinnamon Desktop</h1><div class="description"><p>Eine Dokumentation für die Entwicklung eines Desklets für den Cinnamon Desktop.</p></div><time>25.10.2025</time><!----></div></header><section><div class="sectionSpacer"><article><h2>Übersicht</h2>
<ol>
<li><a href="/de/blogpost/desklet-tutorial/#file-structure" title>Dateistruktur</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#hello-world" title>Hello World Desklet</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#debugging" title>Debugging</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#icons" title>Icons</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#box-layout" title>Box-Layout</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#button" title>Button</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#styling" title>Styling</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#settings" title>Settings</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#images" title>Images</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#mainloop" title>Mainloop</a></li>
<li><a href="/de/blogpost/desklet-tutorial/#translation" title>Übersetzung</a></li>
</ol>
<h2 id="file-structure" class="h2-underlined">Dateistruktur</h2>

<p>Der Quellcode aller Desklets befindet sich in diesem <a href="https://github.com/linuxmint/cinnamon-spices-desklets" title target="_blank" rel="noopener noreferrer">GitHub Repository</a>.</p>
<p>Von diesem Repository erstellen wir einen Fork und fügen unser neues Desklet in einem neuen Ordner hinzu.</p>
<p>Der Ordner muss nach der UUID des Desklets benannt werden. Diese besteht aus dem Namen des Desklets, einem @ und dem GitHub-Usernamen. Für dieses Beispiel <code>tutorial-desklet@KopfdesDaemons</code>.</p>
<p>Wir richten die folgende Dateistruktur ein:</p>
<pre><code class="language-">tutorial-desklet@KopfdesDaemons
    └── files
    │    └── tutorial-desklet@KopfdesDaemons
    │        ├── desklet.js
    │        ├── icon.png
    │        ├── metadata.json
    │        ├── settings-schema.json
    │        └── stylesheet.css
    ├── info.json
    ├── README.md
    └── screenshot.png</code></pre>

<p>In die <code>info.json</code> fügen wir nur den Autor hinzu:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"KopfdesDaemons"</span>
<span class="hljs-punctuation">}</span></code></pre>

<p>Die <code>README.md</code> und <code>screenshot.png</code> werden auf der <a href="https://cinnamon-spices.linuxmint.com/desklets/popular" title target="_blank" rel="noopener noreferrer">Cinnamon Webseite</a> angezeigt.</p>
<p>Die <code>metadata.json</code> sieht wie folgt aus:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"uuid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tutorial-desklet@KopfdesDaemons"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Tutorial Desklet"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"This is a tutorial desklet."</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"max-instances"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"50"</span>
<span class="hljs-punctuation">}</span></code></pre>

<h2 id="hello-world" class="h2-underlined">Hello World Desklet</h2>

<p>Um den Aufbau der <code>desklet.js</code> zu erklären, beginnen wir mit einem einfachen Hello World-Desklet.</p>
<p><img src="/images/desklet-tutorial/hello-world.png" alt="Hello World Desklet" title="Hello World Desklet"></p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Desklet</span> = imports.<span class="hljs-property">ui</span>.<span class="hljs-property">desklet</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">St</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">St</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDesklet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Desklet.Desklet</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">metadata, deskletId</span>) {
    <span class="hljs-variable language_">super</span>(metadata, deskletId);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Tutorial Desklet"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setupLayout</span>();
  }

  <span class="hljs-title function_">_setupLayout</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Label</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">"Hello World!"</span> });
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setContent</span>(label);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">metadata, deskletId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDesklet</span>(metadata, deskletId);
}</code></pre>

<p>Mit diesem Befehl können wir das Desklet testen:</p>
<pre><code class="language-bash">./test-spice tutorial-desklet@KopfdesDaemons -s</code></pre>

<p>Der Parameter <code>-s</code> überspringt die Validierung des Desklets. Das ist hilfreich, wenn noch nicht alle Dateien, wie z.B. die <code>screenshot.png</code>, vorhanden sind.</p>
<h2 id="debugging" class="h2-underlined">Debugging</h2>

<p>Wir können Meldungen in die Konsole loggen:</p>
<pre><code class="language-ts"><span class="hljs-variable language_">global</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"test"</span>);
<span class="hljs-variable language_">global</span>.<span class="hljs-title function_">logError</span>(<span class="hljs-string">"error"</span>);</code></pre>

<p>Die Konsole öffnet man mit einem Rechtsklick auf die Taskleiste unter "Fehler suchen" und dann "Looking Glass".</p>
<h2 id="icons" class="h2-underlined">Icons</h2>

<p>Bisher haben wir nicht viele Importe. Neben <code>Desklet</code> importieren wir noch <code>St</code> für das Label, welches wir anzeigen. <code>St</code> steht für <a href="https://gnome.pages.gitlab.gnome.org/gnome-shell/st/index.html" title target="_blank" rel="noopener noreferrer">Shell Toolkit</a> und stellt UI-Elemente bereit. Das Shell Toolkit baut auf <a href="https://mutter.gnome.org/clutter/index.html" title target="_blank" rel="noopener noreferrer">Clutter</a> auf, eine OpenGl basierte Library zum anzeigen von UI-Elementen auf einem Canvas.</p>
<p>Mit dem Shell Toolkit können wir noch weitere Elemente anzeigen lassen. Tauschen wir als nächstes unser Label mit einem Icon:</p>
<p><img src="/images/desklet-tutorial/icon.png" alt="Icon Desklet" title="Icon Desklet"></p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Desklet</span> = imports.<span class="hljs-property">ui</span>.<span class="hljs-property">desklet</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">St</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">St</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDesklet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Desklet.Desklet</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">metadata, deskletId</span>) {
    <span class="hljs-variable language_">super</span>(metadata, deskletId);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Tutorial Desklet"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setupLayout</span>();
  }

  <span class="hljs-title function_">_setupLayout</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> icon = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Icon</span>({
      <span class="hljs-attr">icon_name</span>: <span class="hljs-string">"face-smile-symbolic"</span>,
      <span class="hljs-attr">icon_type</span>: <span class="hljs-title class_">St</span>.<span class="hljs-property">IconType</span>.<span class="hljs-property">SYMBOLIC</span>,
      <span class="hljs-attr">icon_size</span>: <span class="hljs-number">32</span>,
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setContent</span>(icon);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">metadata, deskletId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDesklet</span>(metadata, deskletId);
}</code></pre>

<p>Die Icon-Namen findet Ihr unter /usr/share/icons/Adwaita/symbolic.</p>
<h2 id="box-layout" class="h2-underlined">Box-Layout</h2>

<p>Bisher haben wir nur ein Element als Content des Desklets gesetzt. Zeigen wir als nächsten das Label und das Icon zusammen an. Um mehr als ein Element anzuzeigen, brauchen wir ein Box-Layout.</p>
<p><img src="/images/desklet-tutorial/box-layout.png" alt="Box Layout Desklet" title="Box Layout Desklet"></p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Desklet</span> = imports.<span class="hljs-property">ui</span>.<span class="hljs-property">desklet</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">St</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">St</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDesklet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Desklet.Desklet</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">metadata, deskletId</span>) {
    <span class="hljs-variable language_">super</span>(metadata, deskletId);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Tutorial Desklet"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setupLayout</span>();
  }

  <span class="hljs-title function_">_setupLayout</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> box = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">BoxLayout</span>({ <span class="hljs-attr">vertical</span>: <span class="hljs-literal">true</span> });

    <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Label</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">"Hello World!"</span> });
    <span class="hljs-keyword">const</span> icon = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Icon</span>({
      <span class="hljs-attr">icon_name</span>: <span class="hljs-string">"face-smile-symbolic"</span>,
      <span class="hljs-attr">icon_type</span>: <span class="hljs-title class_">St</span>.<span class="hljs-property">IconType</span>.<span class="hljs-property">SYMBOLIC</span>,
      <span class="hljs-attr">icon_size</span>: <span class="hljs-number">32</span>,
    });

    box.<span class="hljs-title function_">add_child</span>(label);
    box.<span class="hljs-title function_">add_child</span>(icon);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setContent</span>(box);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">metadata, deskletId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDesklet</span>(metadata, deskletId);
}</code></pre>

<h2 id="button" class="h2-underlined">Button</h2>

<p>Fügen wir nun etwas Logik hinzu und ändern das angezeigte Icon mit einem Klick auf einem Button:</p>
<p><img src="/images/desklet-tutorial/button.png" alt="Button Desklet" title="Button Desklet"></p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Desklet</span> = imports.<span class="hljs-property">ui</span>.<span class="hljs-property">desklet</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">St</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">St</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDesklet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Desklet.Desklet</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">metadata, deskletId</span>) {
    <span class="hljs-variable language_">super</span>(metadata, deskletId);

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconName</span> = <span class="hljs-string">"face-smile-symbolic"</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Tutorial Desklet"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setupLayout</span>();
  }

  <span class="hljs-title function_">_setupLayout</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> box = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">BoxLayout</span>({ <span class="hljs-attr">vertical</span>: <span class="hljs-literal">true</span> });

    <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Label</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">"Hello World!"</span> });
    <span class="hljs-keyword">const</span> icon = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Icon</span>({
      <span class="hljs-attr">icon_name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconName</span>,
      <span class="hljs-attr">icon_type</span>: <span class="hljs-title class_">St</span>.<span class="hljs-property">IconType</span>.<span class="hljs-property">SYMBOLIC</span>,
      <span class="hljs-attr">icon_size</span>: <span class="hljs-number">32</span>,
    });

    <span class="hljs-keyword">const</span> button = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Button</span>({ <span class="hljs-attr">label</span>: <span class="hljs-string">"Change Icon"</span> });
    button.<span class="hljs-title function_">connect</span>(<span class="hljs-string">"button-press-event"</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_changeIcon</span>());

    box.<span class="hljs-title function_">add_child</span>(label);
    box.<span class="hljs-title function_">add_child</span>(icon);
    box.<span class="hljs-title function_">add_child</span>(button);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setContent</span>(box);
  }

  <span class="hljs-title function_">_changeIcon</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconName</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconName</span> === <span class="hljs-string">"face-smile-symbolic"</span> ? <span class="hljs-string">"face-sad-symbolic"</span> : <span class="hljs-string">"face-smile-symbolic"</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setupLayout</span>();
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">metadata, deskletId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDesklet</span>(metadata, deskletId);
}</code></pre>

<p>Nun wird der Smiley traurig, wenn wir den Button "Change Icon" drücken.</p>
<h2 id="styling" class="h2-underlined">Styling</h2>

<p><img src="/images/desklet-tutorial/styling.png" alt="Styling Desklet" title="Styling Desklet"></p>
<p>Den Elementen aus dem <a href="https://gnome.pages.gitlab.gnome.org/gnome-shell/st/index.html" title target="_blank" rel="noopener noreferrer">Shell Toolkit</a> können wir eine <code>style_class</code> hinzufügen.</p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Label</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">"Hello World!"</span>, <span class="hljs-attr">style_class</span>: <span class="hljs-string">"tutorial-desklet-label"</span> });
<span class="hljs-keyword">const</span> button = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Button</span>({ <span class="hljs-attr">label</span>: <span class="hljs-string">"Change Icon"</span>, <span class="hljs-attr">style_class</span>: <span class="hljs-string">"tutorial-desklet-button"</span> });</code></pre>

<p>Anschließend können wir die Elemente in der <code>stylesheet.css</code> mit CSS anpassen:</p>
<pre><code class="language-css"><span class="hljs-selector-class">.tutorial-desklet-label</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2em</span>;
  <span class="hljs-attribute">color</span>: green;
}

<span class="hljs-selector-class">.tutorial-desklet-button</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.5em</span>;
  <span class="hljs-attribute">border</span>: solid <span class="hljs-number">1px</span> <span class="hljs-built_in">rgb</span>(<span class="hljs-number">165</span>, <span class="hljs-number">161</span>, <span class="hljs-number">161</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1em</span>;
}

<span class="hljs-selector-class">.tutorial-desklet-button</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">173</span>, <span class="hljs-number">173</span>, <span class="hljs-number">173</span>);
}</code></pre>

<p>Einige Änderungen in der <code>stylesheet.css</code> werden erst nach einem Neustart des Cinnamon Desktops sichtbar. Dazu auf der Taskleiste mit der rechten Maustaste klicken und unter "Fehler suchen" "Cinnamon neustarten" auswählen.</p>
<p>Der Style kann auch per JavaScript angepasst werden:</p>
<pre><code class="language-ts">label.<span class="hljs-property">style</span> = <span class="hljs-string">`font-size: 2em; color: green;`</span>;
label.<span class="hljs-title function_">set_style</span>(<span class="hljs-string">`font-size: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.labelFontSize}</span>px;`</span>);</code></pre>

<p>Das CSS ist nur rudimentär implementiert. Es funktionieren nur grundlegende Dinge, wie margin, padding, color, border oder font-size. Alles was das Layout betrifft wird über das <a href="/de/blogpost/desklet-tutorial/#box-layout" title>Box-Layout</a> gesteuert. Flexbox funktioniert nicht.</p>
<h3>Hover-Effekte</h3>
<p>Hover-Effekte funktionieren für Buttons. Wenn andere Elemente mit einem Hover-Effekt versehen werden sollen, muss das Shell Toolkit Element angepasst werden mit dem Parameter <code>track_hover</code> und <code>reactive</code>:</p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> box = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">BoxLayout</span>({ <span class="hljs-attr">style_class</span>: <span class="hljs-string">"tutorial-desklet-box"</span>, <span class="hljs-attr">reactive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">track_hover</span>: <span class="hljs-literal">true</span> });</code></pre>

<h2 id="settings" class="h2-underlined">Settings</h2>

<p>Die Einstellungen des Desklets werden in der <code>settings-schema.json</code> definiert.</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"head0"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"header"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Style"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"label-font-size"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"scale"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">20</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"min"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"max"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">60</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"step"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Font size"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tooltip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"The font size of the label."</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>

<p>Die Settings API ist <a href="https://projects.linuxmint.com/reference/git/cinnamon-tutorials/xlet-settings-ref.html" title target="_blank" rel="noopener noreferrer">dokumentiert</a>. Hier die wichtigsten Typen der Settings:</p>
<ul>
<li>entry</li>
<li>checkbox</li>
<li>scale</li>
<li>combobox</li>
<li>spinbutton</li>
<li>filechooser</li>
<li>colorchooser</li>
<li>datechooser</li>
</ul>
<p>Es wird ein neuer Import benötigt und die Einstellungen müssen gebunden werden.</p>
<p>Hier ein einfaches Hello World-Desklet, bei dem die Schriftgröße geändert werden kann:</p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Desklet</span> = imports.<span class="hljs-property">ui</span>.<span class="hljs-property">desklet</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">St</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">St</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Settings</span> = imports.<span class="hljs-property">ui</span>.<span class="hljs-property">settings</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDesklet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Desklet.Desklet</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">metadata, deskletId</span>) {
    <span class="hljs-variable language_">super</span>(metadata, deskletId);

    <span class="hljs-keyword">const</span> settings = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Settings</span>.<span class="hljs-title class_">DeskletSettings</span>(<span class="hljs-variable language_">this</span>, metadata[<span class="hljs-string">"uuid"</span>], deskletId);
    settings.<span class="hljs-title function_">bindProperty</span>(<span class="hljs-title class_">Settings</span>.<span class="hljs-property">BindingDirection</span>.<span class="hljs-property">IN</span>, <span class="hljs-string">"label-font-size"</span>, <span class="hljs-string">"labelFontSize"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_setupLayout</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Tutorial Desklet"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setupLayout</span>();
  }

  <span class="hljs-title function_">_setupLayout</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Label</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">"Hello World!"</span>, <span class="hljs-attr">style_class</span>: <span class="hljs-string">"tutorial-desklet-label"</span> });
    label.<span class="hljs-title function_">set_style</span>(<span class="hljs-string">`font-size: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.labelFontSize}</span>px;`</span>);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setContent</span>(label);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">metadata, deskletId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDesklet</span>(metadata, deskletId);
}</code></pre>

<h2 id="images" class="h2-underlined">Images</h2>

<p><img src="/images/desklet-tutorial/image.png" alt="Image Desklet" title="Image Desklet"></p>
<p>Um Bilder anzuzeigen brauchen wir Hilfsfunktionen und drei weitere Importe.</p>
<p>Hier eine Desklet, welches nur ein Bild anzeigt:</p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Desklet</span> = imports.<span class="hljs-property">ui</span>.<span class="hljs-property">desklet</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">St</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">St</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">GdkPixbuf</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">GdkPixbuf</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Clutter</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">Clutter</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Cogl</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">Cogl</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDesklet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Desklet.Desklet</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">metadata, deskletId</span>) {
    <span class="hljs-variable language_">super</span>(metadata, deskletId);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Tutorial Desklet"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setupLayout</span>();
  }

  <span class="hljs-title function_">_setupLayout</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> image = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_getImageAtScale</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.metadata.path}</span>/images/cat.jpg`</span>, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setContent</span>(image);
  }

  <span class="hljs-title function_">_createActorFromPixbuf</span>(<span class="hljs-params">pixBuf</span>) {
    <span class="hljs-keyword">const</span> pixelFormat = pixBuf.<span class="hljs-title function_">get_has_alpha</span>() ? <span class="hljs-title class_">Cogl</span>.<span class="hljs-property">PixelFormat</span>.<span class="hljs-property">RGBA_8888</span> : <span class="hljs-title class_">Cogl</span>.<span class="hljs-property">PixelFormat</span>.<span class="hljs-property">RGB_888</span>;
    <span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Clutter</span>.<span class="hljs-title class_">Image</span>();
    image.<span class="hljs-title function_">set_data</span>(pixBuf.<span class="hljs-title function_">get_pixels</span>(), pixelFormat, pixBuf.<span class="hljs-title function_">get_width</span>(), pixBuf.<span class="hljs-title function_">get_height</span>(), pixBuf.<span class="hljs-title function_">get_rowstride</span>());

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Clutter</span>.<span class="hljs-title class_">Actor</span>({
      <span class="hljs-attr">content</span>: image,
      <span class="hljs-attr">width</span>: pixBuf.<span class="hljs-title function_">get_width</span>(),
      <span class="hljs-attr">height</span>: pixBuf.<span class="hljs-title function_">get_height</span>(),
    });
  }

  <span class="hljs-title function_">_getImageAtScale</span>(<span class="hljs-params">imageFilePath, requestedWidth, requestedHeight</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> pixBuf = <span class="hljs-title class_">GdkPixbuf</span>.<span class="hljs-property">Pixbuf</span>.<span class="hljs-title function_">new_from_file_at_size</span>(imageFilePath, requestedWidth, requestedHeight);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_createActorFromPixbuf</span>(pixBuf);
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-variable language_">global</span>.<span class="hljs-title function_">logError</span>(<span class="hljs-string">`Error loading image <span class="hljs-subst">${imageFilePath}</span>: <span class="hljs-subst">${e}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Label</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">"Error"</span> });
    }
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">metadata, deskletId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDesklet</span>(metadata, deskletId);
}</code></pre>

<h2 id="mainloop" class="h2-underlined">Mainloop</h2>

<p><img src="/images/desklet-tutorial/counter.png" alt="Counter Desklet" title="Counter Desklet"></p>
<p>Für den Aufruf von Funktionen nach einer bestimmten Zeitspanne gibt es die Mainloop.
Mit dieser können wir einen Timeout setzen und eine Funktion übergeben, die nach dem Timeout ausgeführt wird.</p>
<p>Hier ein einfaches Desklet, welches alle 5 Sekunden einen Counter hochzählt:</p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Desklet</span> = imports.<span class="hljs-property">ui</span>.<span class="hljs-property">desklet</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">St</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">St</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Mainloop</span> = imports.<span class="hljs-property">mainloop</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDesklet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Desklet.Desklet</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">metadata, deskletId</span>) {
    <span class="hljs-variable language_">super</span>(metadata, deskletId);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> = <span class="hljs-number">0</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Tutorial Desklet"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_updateCounter</span>();
  }

  <span class="hljs-title function_">_updateCounter</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeout</span>) <span class="hljs-title class_">Mainloop</span>.<span class="hljs-title function_">source_remove</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeout</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeout</span> = <span class="hljs-title class_">Mainloop</span>.<span class="hljs-title function_">timeout_add_seconds</span>(<span class="hljs-number">5</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_updateCounter</span>());
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span>++;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setupLayout</span>();
  }

  <span class="hljs-title function_">_setupLayout</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Label</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">`Counter: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.counter}</span>`</span> });
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setContent</span>(label);
  }

  <span class="hljs-title function_">on_desklet_removed</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_timeout</span>) <span class="hljs-title class_">Mainloop</span>.<span class="hljs-title function_">source_remove</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_timeout</span>);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">metadata, deskletId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDesklet</span>(metadata, deskletId);
}</code></pre>

<p>Der Timeout kann auch in Millisekunden gesetzt werden:</p>
<pre><code class="language-ts"><span class="hljs-variable language_">this</span>.<span class="hljs-property">timeout</span> = <span class="hljs-title class_">Mainloop</span>.<span class="hljs-title function_">timeout_add</span>(<span class="hljs-number">300</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_updateCounter</span>());</code></pre>

<h2 id="translation" class="h2-underlined">Übersetzung</h2>

<p>Für die Übersetzung brauchen wir etwas Boilerplate:</p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">GLib</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">GLib</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Gettext</span> = imports.<span class="hljs-property">gettext</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">UUID</span> = <span class="hljs-string">"tutorial-desklet@KopfdesDaemons"</span>;

<span class="hljs-title class_">Gettext</span>.<span class="hljs-title function_">bindtextdomain</span>(<span class="hljs-variable constant_">UUID</span>, <span class="hljs-title class_">GLib</span>.<span class="hljs-title function_">get_home_dir</span>() + <span class="hljs-string">"/.local/share/locale"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">_</span>(<span class="hljs-params">str</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Gettext</span>.<span class="hljs-title function_">dgettext</span>(<span class="hljs-variable constant_">UUID</span>, str);
}</code></pre>

<p>Mit diesem Code können wir die Übersetzungen mit der Funktion <code>_()</code> verwenden.</p>
<p>Hier ein Beispielaufruf einer Übersetzung:</p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Label</span>({ <span class="hljs-attr">text</span>: <span class="hljs-title function_">_</span>(<span class="hljs-string">"Hello World!"</span>) });</code></pre>

<h3>Übersetzung extrahieren</h3>
<p>Mit dem folgendem Befehl wird eine <code>.pot</code>-Datei im Ordner <code>po</code> erstellt, welche die zu übersetzenden Texte enthält:</p>
<pre><code class="language-bash">./cinnamon-spices-makepot tutorial-desklet@KopfdesDaemons</code></pre>

<p>Diese Datei können wir mit einem Programm wie <a href="https://poedit.net/" title target="_blank" rel="noopener noreferrer">Poedit</a> öffnen, um Übersetzungen hinzuzufügen.</p>
<p>Die Übersetzung speichern wir z.B. als <code>de.po</code> für die deutsche Sprache. Die <code>.mo</code>-Datei muss gelöscht werden.</p>
<p>Mit diesem Befehl können wir die Übersetzung installieren und testen:</p>
<pre><code class="language-bash">./cinnamon-spices-makepot tutorial-desklet@KopfdesDaemons --install</code></pre>

<p>Hier ein Hello World-Desklet mit Übersetzung:</p>
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Desklet</span> = imports.<span class="hljs-property">ui</span>.<span class="hljs-property">desklet</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">St</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">St</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">GLib</span> = imports.<span class="hljs-property">gi</span>.<span class="hljs-property">GLib</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Gettext</span> = imports.<span class="hljs-property">gettext</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">UUID</span> = <span class="hljs-string">"tutorial-desklet@KopfdesDaemons"</span>;

<span class="hljs-title class_">Gettext</span>.<span class="hljs-title function_">bindtextdomain</span>(<span class="hljs-variable constant_">UUID</span>, <span class="hljs-title class_">GLib</span>.<span class="hljs-title function_">get_home_dir</span>() + <span class="hljs-string">"/.local/share/locale"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">_</span>(<span class="hljs-params">str</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Gettext</span>.<span class="hljs-title function_">dgettext</span>(<span class="hljs-variable constant_">UUID</span>, str);
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDesklet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Desklet.Desklet</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">metadata, deskletId</span>) {
    <span class="hljs-variable language_">super</span>(metadata, deskletId);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Tutorial Desklet"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setupLayout</span>();
  }

  <span class="hljs-title function_">_setupLayout</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>.<span class="hljs-title class_">Label</span>({ <span class="hljs-attr">text</span>: <span class="hljs-title function_">_</span>(<span class="hljs-string">"Hello World!"</span>) });
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setContent</span>(label);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">metadata, deskletId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDesklet</span>(metadata, deskletId);
}</code></pre></article><!----><!----><!----><p>Kommentare werden geladen...</p><!----><!----></div></section></main></app-blog-post><!----><app-footer _ngcontent-ng-c2207563736 _nghost-ng-c1514226587 ngh="2"><footer _ngcontent-ng-c1514226587><div _ngcontent-ng-c1514226587 class="linkGroup"><h2 _ngcontent-ng-c1514226587>Meine Links</h2><ul _ngcontent-ng-c1514226587><li _ngcontent-ng-c1514226587><svg _ngcontent-ng-c1514226587="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path _ngcontent-ng-c1514226587="" fill="currentColor" d="M320.3 205C256.8 204.8 205.2 256.2 205 319.7C204.8 383.2 256.2 434.8 319.7 435C383.2 435.2 434.8 383.8 435 320.3C435.2 256.8 383.8 205.2 320.3 205zM319.7 245.4C360.9 245.2 394.4 278.5 394.6 319.7C394.8 360.9 361.5 394.4 320.3 394.6C279.1 394.8 245.6 361.5 245.4 320.3C245.2 279.1 278.5 245.6 319.7 245.4zM413.1 200.3C413.1 185.5 425.1 173.5 439.9 173.5C454.7 173.5 466.7 185.5 466.7 200.3C466.7 215.1 454.7 227.1 439.9 227.1C425.1 227.1 413.1 215.1 413.1 200.3zM542.8 227.5C541.1 191.6 532.9 159.8 506.6 133.6C480.4 107.4 448.6 99.2 412.7 97.4C375.7 95.3 264.8 95.3 227.8 97.4C192 99.1 160.2 107.3 133.9 133.5C107.6 159.7 99.5 191.5 97.7 227.4C95.6 264.4 95.6 375.3 97.7 412.3C99.4 448.2 107.6 480 133.9 506.2C160.2 532.4 191.9 540.6 227.8 542.4C264.8 544.5 375.7 544.5 412.7 542.4C448.6 540.7 480.4 532.5 506.6 506.2C532.8 480 541 448.2 542.8 412.3C544.9 375.3 544.9 264.5 542.8 227.5zM495 452C487.2 471.6 472.1 486.7 452.4 494.6C422.9 506.3 352.9 503.6 320.3 503.6C287.7 503.6 217.6 506.2 188.2 494.6C168.6 486.8 153.5 471.7 145.6 452C133.9 422.5 136.6 352.5 136.6 319.9C136.6 287.3 134 217.2 145.6 187.8C153.4 168.2 168.5 153.1 188.2 145.2C217.7 133.5 287.7 136.2 320.3 136.2C352.9 136.2 423 133.6 452.4 145.2C472 153 487.1 168.1 495 187.8C506.7 217.3 504 287.3 504 319.9C504 352.5 506.7 422.6 495 452z"/></svg><a _ngcontent-ng-c1514226587 target="_blank" href="https://www.instagram.com/KopfdesDaemons/">Instagram</a></li><li _ngcontent-ng-c1514226587><svg _ngcontent-ng-c1514226587="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path _ngcontent-ng-c1514226587="" fill="currentColor" d="M237.9 461.4C237.9 463.4 235.6 465 232.7 465C229.4 465.3 227.1 463.7 227.1 461.4C227.1 459.4 229.4 457.8 232.3 457.8C235.3 457.5 237.9 459.1 237.9 461.4zM206.8 456.9C206.1 458.9 208.1 461.2 211.1 461.8C213.7 462.8 216.7 461.8 217.3 459.8C217.9 457.8 216 455.5 213 454.6C210.4 453.9 207.5 454.9 206.8 456.9zM251 455.2C248.1 455.9 246.1 457.8 246.4 460.1C246.7 462.1 249.3 463.4 252.3 462.7C255.2 462 257.2 460.1 256.9 458.1C256.6 456.2 253.9 454.9 251 455.2zM316.8 72C178.1 72 72 177.3 72 316C72 426.9 141.8 521.8 241.5 555.2C254.3 557.5 258.8 549.6 258.8 543.1C258.8 536.9 258.5 502.7 258.5 481.7C258.5 481.7 188.5 496.7 173.8 451.9C173.8 451.9 162.4 422.8 146 415.3C146 415.3 123.1 399.6 147.6 399.9C147.6 399.9 172.5 401.9 186.2 425.7C208.1 464.3 244.8 453.2 259.1 446.6C261.4 430.6 267.9 419.5 275.1 412.9C219.2 406.7 162.8 398.6 162.8 302.4C162.8 274.9 170.4 261.1 186.4 243.5C183.8 237 175.3 210.2 189 175.6C209.9 169.1 258 202.6 258 202.6C278 197 299.5 194.1 320.8 194.1C342.1 194.1 363.6 197 383.6 202.6C383.6 202.6 431.7 169 452.6 175.6C466.3 210.3 457.8 237 455.2 243.5C471.2 261.2 481 275 481 302.4C481 398.9 422.1 406.6 366.2 412.9C375.4 420.8 383.2 435.8 383.2 459.3C383.2 493 382.9 534.7 382.9 542.9C382.9 549.4 387.5 557.3 400.2 555C500.2 521.8 568 426.9 568 316C568 177.3 455.5 72 316.8 72zM169.2 416.9C167.9 417.9 168.2 420.2 169.9 422.1C171.5 423.7 173.8 424.4 175.1 423.1C176.4 422.1 176.1 419.8 174.4 417.9C172.8 416.3 170.5 415.6 169.2 416.9zM158.4 408.8C157.7 410.1 158.7 411.7 160.7 412.7C162.3 413.7 164.3 413.4 165 412C165.7 410.7 164.7 409.1 162.7 408.1C160.7 407.5 159.1 407.8 158.4 408.8zM190.8 444.4C189.2 445.7 189.8 448.7 192.1 450.6C194.4 452.9 197.3 453.2 198.6 451.6C199.9 450.3 199.3 447.3 197.3 445.4C195.1 443.1 192.1 442.8 190.8 444.4zM179.4 429.7C177.8 430.7 177.8 433.3 179.4 435.6C181 437.9 183.7 438.9 185 437.9C186.6 436.6 186.6 434 185 431.7C183.6 429.4 181 428.4 179.4 429.7z"/></svg><a _ngcontent-ng-c1514226587 target="_blank" href="https://github.com/KopfdesDaemons">GitHub</a></li><li _ngcontent-ng-c1514226587><svg _ngcontent-ng-c1514226587="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path _ngcontent-ng-c1514226587="" fill="currentColor" d="M419 375L223.3 333.7L215.1 373L410.8 414L419 375zM470 288L316.5 159.7L291 190.5L444.5 318.8L470 288zM438.8 327.7L257.5 243L240.8 279.5L422 364L438.8 327.7zM390.3 96L358.3 120L477.6 280.3L509.6 256.3L390.3 96zM410.8 424L210.8 424L210.8 463.7L410.8 463.7L410.8 424zM450.5 504L171 504L171 384L131 384L131 544L490.5 544L490.5 384L450.5 384L450.5 504z"/></svg><a _ngcontent-ng-c1514226587 target="_blank" href="https://stackoverflow.com/users/13802163/rico">StackOverflow</a></li><li _ngcontent-ng-c1514226587><svg _ngcontent-ng-c1514226587="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path _ngcontent-ng-c1514226587="" fill="currentColor" d="M125.7 233.4L227.2 511.4C156.2 477 107.3 404.2 107.3 320C107.3 289.1 113.9 259.9 125.7 233.4zM463.6 309.3C463.6 283 454.2 264.8 446.1 250.6C435.3 233.1 425.2 218.2 425.2 200.7C425.2 181.1 440 162.9 460.9 162.9C461.8 162.9 462.7 163 463.7 163.1C425.8 128.4 375.4 107.2 320 107.2C245.7 107.2 180.3 145.3 142.2 203.1C147.2 203.3 151.9 203.4 155.9 203.4C178.1 203.4 212.6 200.7 212.6 200.7C224.1 200 225.4 216.9 214 218.2C214 218.2 202.5 219.5 189.7 220.2L267.2 450.6L313.8 311L280.7 220.2C269.2 219.5 258.4 218.2 258.4 218.2C246.9 217.5 248.3 200 259.7 200.7C259.7 200.7 294.8 203.4 315.7 203.4C337.9 203.4 372.4 200.7 372.4 200.7C383.9 200 385.2 216.9 373.8 218.2C373.8 218.2 362.3 219.5 349.5 220.2L426.4 448.9L447.6 378C456.6 348.6 463.6 327.5 463.6 309.3zM323.7 338.6L259.9 524.1C279 529.7 299.1 532.8 320 532.8C344.8 532.8 368.5 528.5 390.6 520.7C390 519.8 389.5 518.8 389.1 517.8L323.7 338.6zM506.7 217.9C507.6 224.7 508.1 231.9 508.1 239.8C508.1 261.4 504.1 285.6 491.9 316L426.9 503.9C490.2 467 532.7 398.5 532.7 320C532.7 283 523.3 248.2 506.7 217.9zM72 320C72 183 183 72 320 72C457 72 568 183 568 320C568 457 457 568 320 568C183 568 72 457 72 320zM556.6 320C556.6 189.3 450.7 83.4 320 83.4C189.3 83.4 83.4 189.3 83.4 320C83.4 450.7 189.3 556.6 320 556.6C450.7 556.6 556.6 450.7 556.6 320z"/></svg><a _ngcontent-ng-c1514226587 target="_blank" href="https://profiles.wordpress.org/ricosylvain/">WordPress</a></li></ul></div><div _ngcontent-ng-c1514226587 class="linkGroup"><h2 _ngcontent-ng-c1514226587>Page</h2><ul _ngcontent-ng-c1514226587><li _ngcontent-ng-c1514226587><a _ngcontent-ng-c1514226587 routerlink="/legal-notice/." href="/legal-notice/." jsaction="click:;">Impressum</a></li><li _ngcontent-ng-c1514226587><a _ngcontent-ng-c1514226587 href="/de/privacy-policy/." jsaction="click:;">Datenschutzerklärung</a></li><li _ngcontent-ng-c1514226587><button _ngcontent-ng-c1514226587 jsaction="click:;">Consent Manager</button></li></ul></div></footer><!----><!----></app-footer></div></app-root>
    <link rel="modulepreload" href="chunk-ZK6YKI7Y.js"><link rel="modulepreload" href="chunk-YFVWPDYZ.js"><link rel="modulepreload" href="chunk-NHMZ6YY5.js"><link rel="modulepreload" href="chunk-U7HTIPXG.js"><link rel="modulepreload" href="chunk-WNUK4EIW.js"><link rel="modulepreload" href="chunk-W7RRUETD.js"><link rel="modulepreload" href="chunk-W6AR63SX.js"><link rel="modulepreload" href="chunk-W6KHYPYV.js"><link rel="modulepreload" href="chunk-PFRJ2KGM.js"><script src="polyfills-PZSJNBYU.js" type="module"></script><script src="main-LHJEXOCJ.js" type="module"></script>
<link rel="modulepreload" href="chunk-WQVB2ROW.js">
<link rel="modulepreload" href="chunk-QXHBG5MS.js">
<link rel="modulepreload" href="chunk-4J4LNLWG.js">


<script id="ng-state" type="application/json">{"943406569":{"b":"---\nhome_h1: Coding ist mein größtes Hobby\nhome_subtitle: Ich habe mir alle Fähigkeiten aus Interesse selber beigebracht. Überzeugter Linux Mint Nutzer.\nmy_projects: Meine Projekte\nfilter_options: Filter Optionen\nlegal_notice: Impressum\nprivacy_policy: Datenschutzerklärung\nmy_links: Meine Links\ncss_gallery_title: CSS Gallery\nabout_this_website_title: Über diese Webseite\nload_comments: Lade Kommentare\ndisqus_privacy_notice: Die Kommentare werden geladen vom Drittanbieter\nfor_more_details_see: Für mehr Details siehe\ncodepen_button: Lade Code Snippet von CodePen\ncodepen_privacy_notice: Der Inhalt wird vom Drittanbieter CodePen geladen. Für mehr Details siehe\nlanguage: Sprache\nhome_description: Meine Portfolio-Website als Hobby-Webentwickler.\ndisqus_descr: Stellt die Kommentarfunktion bereit.\ncodepen_descr: Stellt die Codeausschnitte bereit.\ncustom_language: Speicherung der gewählten Sprache.\nblog_h1: Meine Blogbeiträge\nread_more: mehr lesen\ndate_desc: Datum absteigend\ndate_asc: Datum aufsteigend\ntitle_desc: Titel aufsteigend\ntitle_asc: Titel absteigend\nblogpost_not_found: Dieser Beitrag konnte nicht gefunden werden\nblogpost_not_found_text: Der Beitrag ist nicht vorhanden. Vielleicht gibt es den Beitrag nicht in dieser Sprache.\nvisit_project: Projekt ansehen\nloading_comments: Kommentare werden geladen...\nfile_not_found_title: Seite nicht gefunden\nfile_not_found_text: Es tut mir so so leid.\nno_projects_found: Keine Projekte gefunden\nsearch_project: Suche Projekt\n","h":{},"s":200,"st":"OK","u":"/i18n/de.yaml","rt":"text"},"1936343233":{"b":"---\nhome_h1: Coding is my biggest hobby\nhome_subtitle: I taught myself all skills out of interest. Linux Mint user.\nmy_projects: My Projects\nfilter_options: Filter options\nlegal_notice: Legal notice\nprivacy_policy: Privacy policy\nmy_links: My Links\ncss_gallery_title: CSS gallery\nabout_this_website_title: About this website\nload_comments: Load Comments\ndisqus_privacy_notice: The comments are loaded by the third-party provider\nfor_more_details_see: For more details see\ncodepen_button: Load code snippet from CodePen\ncodepen_privacy_notice: The code is loaded by the third-party provider CodePen. For more details see\nlanguage: Language\nhome_description: My portfolio website as a hobby web developer.\ndisqus_descr: Provides the comment function.\ncodepen_descr: Provides the code snippets.\ncustom_language: Storage of the selected language.\nblog_h1: My blogposts\nread_more: read more\ndate_desc: Date descending\ndate_asc: Date ascending\ntitle_desc: Title ascending\ntitle_asc: Title descending\nblogpost_not_found: This post could not be found\nblogpost_not_found_text: The article does not exist. Perhaps the article does not exist in this language.\nvisit_project: visit project\nloading_comments: Comments are being loaded...\nfile_not_found_title: Page not found\nfile_not_found_text: I am so so sorry.\nno_projects_found: No projects found\nsearch_project: Search project\n","h":{},"s":200,"st":"OK","u":"/i18n/en.yaml","rt":"text"},"2479266832":{"b":"---\ntitle: \"Tutorial: Entwicklung eines Desklets für den Cinnamon Desktop\"\nauthor: Rico\nimage: /images/desklet-tutorial.avif\nkeywords:\n  - Cinnamon\n  - Linux\ndescription: Eine Dokumentation für die Entwicklung eines Desklets für den Cinnamon Desktop.\ndate: 2025-10-25\n---\n\n## Übersicht\n\n1.  [Dateistruktur](/de/blogpost/desklet-tutorial/#file-structure)\n2.  [Hello World Desklet](/de/blogpost/desklet-tutorial/#hello-world)\n3.  [Debugging](/de/blogpost/desklet-tutorial/#debugging)\n4.  [Icons](/de/blogpost/desklet-tutorial/#icons)\n5.  [Box-Layout](/de/blogpost/desklet-tutorial/#box-layout)\n6.  [Button](/de/blogpost/desklet-tutorial/#button)\n7.  [Styling](/de/blogpost/desklet-tutorial/#styling)\n8.  [Settings](/de/blogpost/desklet-tutorial/#settings)\n9.  [Images](/de/blogpost/desklet-tutorial/#images)\n10. [Mainloop](/de/blogpost/desklet-tutorial/#mainloop)\n11. [Übersetzung](/de/blogpost/desklet-tutorial/#translation)\n\n\u003Ch2 id=\"file-structure\" class=\"h2-underlined\">Dateistruktur\u003C/h2>\n\nDer Quellcode aller Desklets befindet sich in diesem [GitHub Repository](https://github.com/linuxmint/cinnamon-spices-desklets).\n\nVon diesem Repository erstellen wir einen Fork und fügen unser neues Desklet in einem neuen Ordner hinzu.\n\nDer Ordner muss nach der UUID des Desklets benannt werden. Diese besteht aus dem Namen des Desklets, einem @ und dem GitHub-Usernamen. Für dieses Beispiel `tutorial-desklet@KopfdesDaemons`.\n\nWir richten die folgende Dateistruktur ein:\n\n```\n  tutorial-desklet@KopfdesDaemons\n    └── files\n    │    └── tutorial-desklet@KopfdesDaemons\n    │        ├── desklet.js\n    │        ├── icon.png\n    │        ├── metadata.json\n    │        ├── settings-schema.json\n    │        └── stylesheet.css\n    ├── info.json\n    ├── README.md\n    └── screenshot.png\n```\n\nIn die `info.json` fügen wir nur den Autor hinzu:\n\n```json\n{\n  \"author\": \"KopfdesDaemons\"\n}\n```\n\nDie `README.md` und `screenshot.png` werden auf der [Cinnamon Webseite](https://cinnamon-spices.linuxmint.com/desklets/popular) angezeigt.\n\nDie `metadata.json` sieht wie folgt aus:\n\n```json\n{\n  \"uuid\": \"tutorial-desklet@KopfdesDaemons\",\n  \"name\": \"Tutorial Desklet\",\n  \"description\": \"This is a tutorial desklet.\",\n  \"version\": \"1.0\",\n  \"max-instances\": \"50\"\n}\n```\n\n\u003Ch2 id=\"hello-world\" class=\"h2-underlined\">Hello World Desklet\u003C/h2>\n\nUm den Aufbau der `desklet.js` zu erklären, beginnen wir mit einem einfachen Hello World-Desklet.\n\n![Hello World Desklet](/images/desklet-tutorial/hello-world.png \"Hello World Desklet\")\n\n```ts\nconst Desklet = imports.ui.desklet;\nconst St = imports.gi.St;\n\nclass MyDesklet extends Desklet.Desklet {\n  constructor(metadata, deskletId) {\n    super(metadata, deskletId);\n\n    this.setHeader(\"Tutorial Desklet\");\n    this._setupLayout();\n  }\n\n  _setupLayout() {\n    const label = new St.Label({ text: \"Hello World!\" });\n    this.setContent(label);\n  }\n}\n\nfunction main(metadata, deskletId) {\n  return new MyDesklet(metadata, deskletId);\n}\n```\n\nMit diesem Befehl können wir das Desklet testen:\n\n```bash\n./test-spice tutorial-desklet@KopfdesDaemons -s\n```\n\nDer Parameter `-s` überspringt die Validierung des Desklets. Das ist hilfreich, wenn noch nicht alle Dateien, wie z.B. die `screenshot.png`, vorhanden sind.\n\n\u003Ch2 id=\"debugging\" class=\"h2-underlined\">Debugging\u003C/h2>\n\nWir können Meldungen in die Konsole loggen:\n\n```ts\nglobal.log(\"test\");\nglobal.logError(\"error\");\n```\n\nDie Konsole öffnet man mit einem Rechtsklick auf die Taskleiste unter \"Fehler suchen\" und dann \"Looking Glass\".\n\n\u003Ch2 id=\"icons\" class=\"h2-underlined\">Icons\u003C/h2>\n\nBisher haben wir nicht viele Importe. Neben `Desklet` importieren wir noch `St` für das Label, welches wir anzeigen. `St` steht für [Shell Toolkit](https://gnome.pages.gitlab.gnome.org/gnome-shell/st/index.html) und stellt UI-Elemente bereit. Das Shell Toolkit baut auf [Clutter](https://mutter.gnome.org/clutter/index.html) auf, eine OpenGl basierte Library zum anzeigen von UI-Elementen auf einem Canvas.\n\nMit dem Shell Toolkit können wir noch weitere Elemente anzeigen lassen. Tauschen wir als nächstes unser Label mit einem Icon:\n\n![Icon Desklet](/images/desklet-tutorial/icon.png \"Icon Desklet\")\n\n```ts\nconst Desklet = imports.ui.desklet;\nconst St = imports.gi.St;\n\nclass MyDesklet extends Desklet.Desklet {\n  constructor(metadata, deskletId) {\n    super(metadata, deskletId);\n\n    this.setHeader(\"Tutorial Desklet\");\n    this._setupLayout();\n  }\n\n  _setupLayout() {\n    const icon = new St.Icon({\n      icon_name: \"face-smile-symbolic\",\n      icon_type: St.IconType.SYMBOLIC,\n      icon_size: 32,\n    });\n    this.setContent(icon);\n  }\n}\n\nfunction main(metadata, deskletId) {\n  return new MyDesklet(metadata, deskletId);\n}\n```\n\nDie Icon-Namen findet Ihr unter /usr/share/icons/Adwaita/symbolic.\n\n\u003Ch2 id=\"box-layout\" class=\"h2-underlined\">Box-Layout\u003C/h2>\n\nBisher haben wir nur ein Element als Content des Desklets gesetzt. Zeigen wir als nächsten das Label und das Icon zusammen an. Um mehr als ein Element anzuzeigen, brauchen wir ein Box-Layout.\n\n![Box Layout Desklet](/images/desklet-tutorial/box-layout.png \"Box Layout Desklet\")\n\n```ts\nconst Desklet = imports.ui.desklet;\nconst St = imports.gi.St;\n\nclass MyDesklet extends Desklet.Desklet {\n  constructor(metadata, deskletId) {\n    super(metadata, deskletId);\n\n    this.setHeader(\"Tutorial Desklet\");\n    this._setupLayout();\n  }\n\n  _setupLayout() {\n    const box = new St.BoxLayout({ vertical: true });\n\n    const label = new St.Label({ text: \"Hello World!\" });\n    const icon = new St.Icon({\n      icon_name: \"face-smile-symbolic\",\n      icon_type: St.IconType.SYMBOLIC,\n      icon_size: 32,\n    });\n\n    box.add_child(label);\n    box.add_child(icon);\n\n    this.setContent(box);\n  }\n}\n\nfunction main(metadata, deskletId) {\n  return new MyDesklet(metadata, deskletId);\n}\n```\n\n\u003Ch2 id=\"button\" class=\"h2-underlined\">Button\u003C/h2>\n\nFügen wir nun etwas Logik hinzu und ändern das angezeigte Icon mit einem Klick auf einem Button:\n\n![Button Desklet](/images/desklet-tutorial/button.png \"Button Desklet\")\n\n```ts\nconst Desklet = imports.ui.desklet;\nconst St = imports.gi.St;\n\nclass MyDesklet extends Desklet.Desklet {\n  constructor(metadata, deskletId) {\n    super(metadata, deskletId);\n\n    this.iconName = \"face-smile-symbolic\";\n\n    this.setHeader(\"Tutorial Desklet\");\n    this._setupLayout();\n  }\n\n  _setupLayout() {\n    const box = new St.BoxLayout({ vertical: true });\n\n    const label = new St.Label({ text: \"Hello World!\" });\n    const icon = new St.Icon({\n      icon_name: this.iconName,\n      icon_type: St.IconType.SYMBOLIC,\n      icon_size: 32,\n    });\n\n    const button = new St.Button({ label: \"Change Icon\" });\n    button.connect(\"button-press-event\", () => this._changeIcon());\n\n    box.add_child(label);\n    box.add_child(icon);\n    box.add_child(button);\n\n    this.setContent(box);\n  }\n\n  _changeIcon() {\n    this.iconName = this.iconName === \"face-smile-symbolic\" ? \"face-sad-symbolic\" : \"face-smile-symbolic\";\n    this._setupLayout();\n  }\n}\n\nfunction main(metadata, deskletId) {\n  return new MyDesklet(metadata, deskletId);\n}\n```\n\nNun wird der Smiley traurig, wenn wir den Button \"Change Icon\" drücken.\n\n\u003Ch2 id=\"styling\" class=\"h2-underlined\">Styling\u003C/h2>\n\n![Styling Desklet](/images/desklet-tutorial/styling.png \"Styling Desklet\")\n\nDen Elementen aus dem [Shell Toolkit](https://gnome.pages.gitlab.gnome.org/gnome-shell/st/index.html) können wir eine `style_class` hinzufügen.\n\n```ts\nconst label = new St.Label({ text: \"Hello World!\", style_class: \"tutorial-desklet-label\" });\nconst button = new St.Button({ label: \"Change Icon\", style_class: \"tutorial-desklet-button\" });\n```\n\nAnschließend können wir die Elemente in der `stylesheet.css` mit CSS anpassen:\n\n```css\n.tutorial-desklet-label {\n  font-size: 2em;\n  color: green;\n}\n\n.tutorial-desklet-button {\n  padding: 0.5em;\n  border: solid 1px rgb(165, 161, 161);\n  border-radius: 5px;\n  margin-top: 1em;\n}\n\n.tutorial-desklet-button:hover {\n  background-color: rgb(173, 173, 173);\n}\n```\n\nEinige Änderungen in der `stylesheet.css` werden erst nach einem Neustart des Cinnamon Desktops sichtbar. Dazu auf der Taskleiste mit der rechten Maustaste klicken und unter \"Fehler suchen\" \"Cinnamon neustarten\" auswählen.\n\nDer Style kann auch per JavaScript angepasst werden:\n\n```ts\nlabel.style = `font-size: 2em; color: green;`;\nlabel.set_style(`font-size: ${this.labelFontSize}px;`);\n```\n\nDas CSS ist nur rudimentär implementiert. Es funktionieren nur grundlegende Dinge, wie margin, padding, color, border oder font-size. Alles was das Layout betrifft wird über das [Box-Layout](/de/blogpost/desklet-tutorial/#box-layout) gesteuert. Flexbox funktioniert nicht.\n\n### Hover-Effekte\n\nHover-Effekte funktionieren für Buttons. Wenn andere Elemente mit einem Hover-Effekt versehen werden sollen, muss das Shell Toolkit Element angepasst werden mit dem Parameter `track_hover` und `reactive`:\n\n```ts\nconst box = new St.BoxLayout({ style_class: \"tutorial-desklet-box\", reactive: true, track_hover: true });\n```\n\n\u003Ch2 id=\"settings\" class=\"h2-underlined\">Settings\u003C/h2>\n\nDie Einstellungen des Desklets werden in der `settings-schema.json` definiert.\n\n```json\n{\n  \"head0\": {\n    \"type\": \"header\",\n    \"description\": \"Style\"\n  },\n  \"label-font-size\": {\n    \"type\": \"scale\",\n    \"default\": 20,\n    \"min\": 12,\n    \"max\": 60,\n    \"step\": 1,\n    \"description\": \"Font size\",\n    \"tooltip\": \"The font size of the label.\"\n  }\n}\n```\n\nDie Settings API ist [dokumentiert](https://projects.linuxmint.com/reference/git/cinnamon-tutorials/xlet-settings-ref.html). Hier die wichtigsten Typen der Settings:\n\n- entry\n- checkbox\n- scale\n- combobox\n- spinbutton\n- filechooser\n- colorchooser\n- datechooser\n\nEs wird ein neuer Import benötigt und die Einstellungen müssen gebunden werden.\n\nHier ein einfaches Hello World-Desklet, bei dem die Schriftgröße geändert werden kann:\n\n```ts\nconst Desklet = imports.ui.desklet;\nconst St = imports.gi.St;\nconst Settings = imports.ui.settings;\n\nclass MyDesklet extends Desklet.Desklet {\n  constructor(metadata, deskletId) {\n    super(metadata, deskletId);\n\n    const settings = new Settings.DeskletSettings(this, metadata[\"uuid\"], deskletId);\n    settings.bindProperty(Settings.BindingDirection.IN, \"label-font-size\", \"labelFontSize\", this._setupLayout.bind(this));\n\n    this.setHeader(\"Tutorial Desklet\");\n    this._setupLayout();\n  }\n\n  _setupLayout() {\n    const label = new St.Label({ text: \"Hello World!\", style_class: \"tutorial-desklet-label\" });\n    label.set_style(`font-size: ${this.labelFontSize}px;`);\n\n    this.setContent(label);\n  }\n}\n\nfunction main(metadata, deskletId) {\n  return new MyDesklet(metadata, deskletId);\n}\n```\n\n\u003Ch2 id=\"images\" class=\"h2-underlined\">Images\u003C/h2>\n\n![Image Desklet](/images/desklet-tutorial/image.png \"Image Desklet\")\n\nUm Bilder anzuzeigen brauchen wir Hilfsfunktionen und drei weitere Importe.\n\nHier eine Desklet, welches nur ein Bild anzeigt:\n\n```ts\nconst Desklet = imports.ui.desklet;\nconst St = imports.gi.St;\nconst GdkPixbuf = imports.gi.GdkPixbuf;\nconst Clutter = imports.gi.Clutter;\nconst Cogl = imports.gi.Cogl;\n\nclass MyDesklet extends Desklet.Desklet {\n  constructor(metadata, deskletId) {\n    super(metadata, deskletId);\n\n    this.setHeader(\"Tutorial Desklet\");\n    this._setupLayout();\n  }\n\n  _setupLayout() {\n    const image = this._getImageAtScale(`${this.metadata.path}/images/cat.jpg`, 200, 300);\n    this.setContent(image);\n  }\n\n  _createActorFromPixbuf(pixBuf) {\n    const pixelFormat = pixBuf.get_has_alpha() ? Cogl.PixelFormat.RGBA_8888 : Cogl.PixelFormat.RGB_888;\n    const image = new Clutter.Image();\n    image.set_data(pixBuf.get_pixels(), pixelFormat, pixBuf.get_width(), pixBuf.get_height(), pixBuf.get_rowstride());\n\n    return new Clutter.Actor({\n      content: image,\n      width: pixBuf.get_width(),\n      height: pixBuf.get_height(),\n    });\n  }\n\n  _getImageAtScale(imageFilePath, requestedWidth, requestedHeight) {\n    try {\n      const pixBuf = GdkPixbuf.Pixbuf.new_from_file_at_size(imageFilePath, requestedWidth, requestedHeight);\n      return this._createActorFromPixbuf(pixBuf);\n    } catch (e) {\n      global.logError(`Error loading image ${imageFilePath}: ${e}`);\n      return new St.Label({ text: \"Error\" });\n    }\n  }\n}\n\nfunction main(metadata, deskletId) {\n  return new MyDesklet(metadata, deskletId);\n}\n```\n\n\u003Ch2 id=\"mainloop\" class=\"h2-underlined\">Mainloop\u003C/h2>\n\n![Counter Desklet](/images/desklet-tutorial/counter.png \"Counter Desklet\")\n\nFür den Aufruf von Funktionen nach einer bestimmten Zeitspanne gibt es die Mainloop.\nMit dieser können wir einen Timeout setzen und eine Funktion übergeben, die nach dem Timeout ausgeführt wird.\n\nHier ein einfaches Desklet, welches alle 5 Sekunden einen Counter hochzählt:\n\n```ts\nconst Desklet = imports.ui.desklet;\nconst St = imports.gi.St;\nconst Mainloop = imports.mainloop;\n\nclass MyDesklet extends Desklet.Desklet {\n  constructor(metadata, deskletId) {\n    super(metadata, deskletId);\n    this.counter = 0;\n\n    this.setHeader(\"Tutorial Desklet\");\n    this._updateCounter();\n  }\n\n  _updateCounter() {\n    if (this.timeout) Mainloop.source_remove(this.timeout);\n    this.timeout = Mainloop.timeout_add_seconds(5, () => this._updateCounter());\n    this.counter++;\n    this._setupLayout();\n  }\n\n  _setupLayout() {\n    const label = new St.Label({ text: `Counter: ${this.counter}` });\n    this.setContent(label);\n  }\n\n  on_desklet_removed() {\n    if (this._timeout) Mainloop.source_remove(this._timeout);\n  }\n}\n\nfunction main(metadata, deskletId) {\n  return new MyDesklet(metadata, deskletId);\n}\n```\n\nDer Timeout kann auch in Millisekunden gesetzt werden:\n\n```ts\nthis.timeout = Mainloop.timeout_add(300, () => this._updateCounter());\n```\n\n\u003Ch2 id=\"translation\" class=\"h2-underlined\">Übersetzung\u003C/h2>\n\nFür die Übersetzung brauchen wir etwas Boilerplate:\n\n```ts\nconst GLib = imports.gi.GLib;\nconst Gettext = imports.gettext;\n\nconst UUID = \"tutorial-desklet@KopfdesDaemons\";\n\nGettext.bindtextdomain(UUID, GLib.get_home_dir() + \"/.local/share/locale\");\n\nfunction _(str) {\n  return Gettext.dgettext(UUID, str);\n}\n```\n\nMit diesem Code können wir die Übersetzungen mit der Funktion `_()` verwenden.\n\nHier ein Beispielaufruf einer Übersetzung:\n\n```ts\nconst label = new St.Label({ text: _(\"Hello World!\") });\n```\n\n### Übersetzung extrahieren\n\nMit dem folgendem Befehl wird eine `.pot`-Datei im Ordner `po` erstellt, welche die zu übersetzenden Texte enthält:\n\n```bash\n./cinnamon-spices-makepot tutorial-desklet@KopfdesDaemons\n\n```\n\nDiese Datei können wir mit einem Programm wie [Poedit](https://poedit.net/) öffnen, um Übersetzungen hinzuzufügen.\n\nDie Übersetzung speichern wir z.B. als `de.po` für die deutsche Sprache. Die `.mo`-Datei muss gelöscht werden.\n\nMit diesem Befehl können wir die Übersetzung installieren und testen:\n\n```bash\n./cinnamon-spices-makepot tutorial-desklet@KopfdesDaemons --install\n```\n\nHier ein Hello World-Desklet mit Übersetzung:\n\n```ts\nconst Desklet = imports.ui.desklet;\nconst St = imports.gi.St;\nconst GLib = imports.gi.GLib;\nconst Gettext = imports.gettext;\n\nconst UUID = \"tutorial-desklet@KopfdesDaemons\";\n\nGettext.bindtextdomain(UUID, GLib.get_home_dir() + \"/.local/share/locale\");\n\nfunction _(str) {\n  return Gettext.dgettext(UUID, str);\n}\n\nclass MyDesklet extends Desklet.Desklet {\n  constructor(metadata, deskletId) {\n    super(metadata, deskletId);\n\n    this.setHeader(\"Tutorial Desklet\");\n    this._setupLayout();\n  }\n\n  _setupLayout() {\n    const label = new St.Label({ text: _(\"Hello World!\") });\n    this.setContent(label);\n  }\n}\n\nfunction main(metadata, deskletId) {\n  return new MyDesklet(metadata, deskletId);\n}\n```\n","h":{"Content-Type":["text/markdown"]},"s":200,"st":"OK","u":"/posts/de/desklet-tutorial.md","rt":"text"},"post-de-desklet-tutorial":{"postMeta":{"keywords":["Cinnamon","Linux"],"commentsDisabled":false,"hasCodePen":false,"hideInFeed":false,"fileName":"desklet-tutorial","title":"Tutorial: Entwicklung eines Desklets für den Cinnamon Desktop","author":"Rico","image":"/images/desklet-tutorial.avif","description":"Eine Dokumentation für die Entwicklung eines Desklets für den Cinnamon Desktop.","date":"2025-10-25T00:00:00.000Z","localDateString":"25.10.2025"},"postContent":"\u003Ch2>Übersicht\u003C/h2>\n\u003Col>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#file-structure\" title=\"\">Dateistruktur\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#hello-world\" title=\"\">Hello World Desklet\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#debugging\" title=\"\">Debugging\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#icons\" title=\"\">Icons\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#box-layout\" title=\"\">Box-Layout\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#button\" title=\"\">Button\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#styling\" title=\"\">Styling\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#settings\" title=\"\">Settings\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#images\" title=\"\">Images\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#mainloop\" title=\"\">Mainloop\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"/de/blogpost/desklet-tutorial/#translation\" title=\"\">Übersetzung\u003C/a>\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"file-structure\" class=\"h2-underlined\">Dateistruktur\u003C/h2>\n\n\u003Cp>Der Quellcode aller Desklets befindet sich in diesem \u003Ca href=\"https://github.com/linuxmint/cinnamon-spices-desklets\" title=\"\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub Repository\u003C/a>.\u003C/p>\n\u003Cp>Von diesem Repository erstellen wir einen Fork und fügen unser neues Desklet in einem neuen Ordner hinzu.\u003C/p>\n\u003Cp>Der Ordner muss nach der UUID des Desklets benannt werden. Diese besteht aus dem Namen des Desklets, einem @ und dem GitHub-Usernamen. Für dieses Beispiel \u003Ccode>tutorial-desklet@KopfdesDaemons\u003C/code>.\u003C/p>\n\u003Cp>Wir richten die folgende Dateistruktur ein:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-\">tutorial-desklet@KopfdesDaemons\n    └── files\n    │    └── tutorial-desklet@KopfdesDaemons\n    │        ├── desklet.js\n    │        ├── icon.png\n    │        ├── metadata.json\n    │        ├── settings-schema.json\n    │        └── stylesheet.css\n    ├── info.json\n    ├── README.md\n    └── screenshot.png\u003C/code>\u003C/pre>\n\n\u003Cp>In die \u003Ccode>info.json\u003C/code> fügen wir nur den Autor hinzu:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-json\">\u003Cspan class=\"hljs-punctuation\">{\u003C/span>\n  \u003Cspan class=\"hljs-attr\">&quot;author&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;KopfdesDaemons&quot;\u003C/span>\n\u003Cspan class=\"hljs-punctuation\">}\u003C/span>\u003C/code>\u003C/pre>\n\n\u003Cp>Die \u003Ccode>README.md\u003C/code> und \u003Ccode>screenshot.png\u003C/code> werden auf der \u003Ca href=\"https://cinnamon-spices.linuxmint.com/desklets/popular\" title=\"\" target=\"_blank\" rel=\"noopener noreferrer\">Cinnamon Webseite\u003C/a> angezeigt.\u003C/p>\n\u003Cp>Die \u003Ccode>metadata.json\u003C/code> sieht wie folgt aus:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-json\">\u003Cspan class=\"hljs-punctuation\">{\u003C/span>\n  \u003Cspan class=\"hljs-attr\">&quot;uuid&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;tutorial-desklet@KopfdesDaemons&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n  \u003Cspan class=\"hljs-attr\">&quot;name&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;Tutorial Desklet&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n  \u003Cspan class=\"hljs-attr\">&quot;description&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;This is a tutorial desklet.&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n  \u003Cspan class=\"hljs-attr\">&quot;version&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;1.0&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n  \u003Cspan class=\"hljs-attr\">&quot;max-instances&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;50&quot;\u003C/span>\n\u003Cspan class=\"hljs-punctuation\">}\u003C/span>\u003C/code>\u003C/pre>\n\n\u003Ch2 id=\"hello-world\" class=\"h2-underlined\">Hello World Desklet\u003C/h2>\n\n\u003Cp>Um den Aufbau der \u003Ccode>desklet.js\u003C/code> zu erklären, beginnen wir mit einem einfachen Hello World-Desklet.\u003C/p>\n\u003Cp>\u003Cimg src=\"/images/desklet-tutorial/hello-world.png\" alt=\"Hello World Desklet\" title=\"Hello World Desklet\">\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Desklet\u003C/span> = imports.\u003Cspan class=\"hljs-property\">ui\u003C/span>.\u003Cspan class=\"hljs-property\">desklet\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">St\u003C/span>;\n\n\u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span> \u003Cspan class=\"hljs-keyword\">extends\u003C/span> \u003Cspan class=\"hljs-title class_ inherited__\">Desklet.Desklet\u003C/span> {\n  \u003Cspan class=\"hljs-title function_\">constructor\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n    \u003Cspan class=\"hljs-variable language_\">super\u003C/span>(metadata, deskletId);\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setHeader\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Tutorial Desklet&quot;\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>();\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> label = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Label\u003C/span>({ \u003Cspan class=\"hljs-attr\">text\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Hello World!&quot;\u003C/span> });\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setContent\u003C/span>(label);\n  }\n}\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">main\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span>(metadata, deskletId);\n}\u003C/code>\u003C/pre>\n\n\u003Cp>Mit diesem Befehl können wir das Desklet testen:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-bash\">./test-spice tutorial-desklet@KopfdesDaemons -s\u003C/code>\u003C/pre>\n\n\u003Cp>Der Parameter \u003Ccode>-s\u003C/code> überspringt die Validierung des Desklets. Das ist hilfreich, wenn noch nicht alle Dateien, wie z.B. die \u003Ccode>screenshot.png\u003C/code>, vorhanden sind.\u003C/p>\n\u003Ch2 id=\"debugging\" class=\"h2-underlined\">Debugging\u003C/h2>\n\n\u003Cp>Wir können Meldungen in die Konsole loggen:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-variable language_\">global\u003C/span>.\u003Cspan class=\"hljs-title function_\">log\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;test&quot;\u003C/span>);\n\u003Cspan class=\"hljs-variable language_\">global\u003C/span>.\u003Cspan class=\"hljs-title function_\">logError\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;error&quot;\u003C/span>);\u003C/code>\u003C/pre>\n\n\u003Cp>Die Konsole öffnet man mit einem Rechtsklick auf die Taskleiste unter &quot;Fehler suchen&quot; und dann &quot;Looking Glass&quot;.\u003C/p>\n\u003Ch2 id=\"icons\" class=\"h2-underlined\">Icons\u003C/h2>\n\n\u003Cp>Bisher haben wir nicht viele Importe. Neben \u003Ccode>Desklet\u003C/code> importieren wir noch \u003Ccode>St\u003C/code> für das Label, welches wir anzeigen. \u003Ccode>St\u003C/code> steht für \u003Ca href=\"https://gnome.pages.gitlab.gnome.org/gnome-shell/st/index.html\" title=\"\" target=\"_blank\" rel=\"noopener noreferrer\">Shell Toolkit\u003C/a> und stellt UI-Elemente bereit. Das Shell Toolkit baut auf \u003Ca href=\"https://mutter.gnome.org/clutter/index.html\" title=\"\" target=\"_blank\" rel=\"noopener noreferrer\">Clutter\u003C/a> auf, eine OpenGl basierte Library zum anzeigen von UI-Elementen auf einem Canvas.\u003C/p>\n\u003Cp>Mit dem Shell Toolkit können wir noch weitere Elemente anzeigen lassen. Tauschen wir als nächstes unser Label mit einem Icon:\u003C/p>\n\u003Cp>\u003Cimg src=\"/images/desklet-tutorial/icon.png\" alt=\"Icon Desklet\" title=\"Icon Desklet\">\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Desklet\u003C/span> = imports.\u003Cspan class=\"hljs-property\">ui\u003C/span>.\u003Cspan class=\"hljs-property\">desklet\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">St\u003C/span>;\n\n\u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span> \u003Cspan class=\"hljs-keyword\">extends\u003C/span> \u003Cspan class=\"hljs-title class_ inherited__\">Desklet.Desklet\u003C/span> {\n  \u003Cspan class=\"hljs-title function_\">constructor\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n    \u003Cspan class=\"hljs-variable language_\">super\u003C/span>(metadata, deskletId);\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setHeader\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Tutorial Desklet&quot;\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>();\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> icon = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Icon\u003C/span>({\n      \u003Cspan class=\"hljs-attr\">icon_name\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;face-smile-symbolic&quot;\u003C/span>,\n      \u003Cspan class=\"hljs-attr\">icon_type\u003C/span>: \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-property\">IconType\u003C/span>.\u003Cspan class=\"hljs-property\">SYMBOLIC\u003C/span>,\n      \u003Cspan class=\"hljs-attr\">icon_size\u003C/span>: \u003Cspan class=\"hljs-number\">32\u003C/span>,\n    });\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setContent\u003C/span>(icon);\n  }\n}\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">main\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span>(metadata, deskletId);\n}\u003C/code>\u003C/pre>\n\n\u003Cp>Die Icon-Namen findet Ihr unter /usr/share/icons/Adwaita/symbolic.\u003C/p>\n\u003Ch2 id=\"box-layout\" class=\"h2-underlined\">Box-Layout\u003C/h2>\n\n\u003Cp>Bisher haben wir nur ein Element als Content des Desklets gesetzt. Zeigen wir als nächsten das Label und das Icon zusammen an. Um mehr als ein Element anzuzeigen, brauchen wir ein Box-Layout.\u003C/p>\n\u003Cp>\u003Cimg src=\"/images/desklet-tutorial/box-layout.png\" alt=\"Box Layout Desklet\" title=\"Box Layout Desklet\">\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Desklet\u003C/span> = imports.\u003Cspan class=\"hljs-property\">ui\u003C/span>.\u003Cspan class=\"hljs-property\">desklet\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">St\u003C/span>;\n\n\u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span> \u003Cspan class=\"hljs-keyword\">extends\u003C/span> \u003Cspan class=\"hljs-title class_ inherited__\">Desklet.Desklet\u003C/span> {\n  \u003Cspan class=\"hljs-title function_\">constructor\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n    \u003Cspan class=\"hljs-variable language_\">super\u003C/span>(metadata, deskletId);\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setHeader\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Tutorial Desklet&quot;\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>();\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> box = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">BoxLayout\u003C/span>({ \u003Cspan class=\"hljs-attr\">vertical\u003C/span>: \u003Cspan class=\"hljs-literal\">true\u003C/span> });\n\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> label = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Label\u003C/span>({ \u003Cspan class=\"hljs-attr\">text\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Hello World!&quot;\u003C/span> });\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> icon = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Icon\u003C/span>({\n      \u003Cspan class=\"hljs-attr\">icon_name\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;face-smile-symbolic&quot;\u003C/span>,\n      \u003Cspan class=\"hljs-attr\">icon_type\u003C/span>: \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-property\">IconType\u003C/span>.\u003Cspan class=\"hljs-property\">SYMBOLIC\u003C/span>,\n      \u003Cspan class=\"hljs-attr\">icon_size\u003C/span>: \u003Cspan class=\"hljs-number\">32\u003C/span>,\n    });\n\n    box.\u003Cspan class=\"hljs-title function_\">add_child\u003C/span>(label);\n    box.\u003Cspan class=\"hljs-title function_\">add_child\u003C/span>(icon);\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setContent\u003C/span>(box);\n  }\n}\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">main\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span>(metadata, deskletId);\n}\u003C/code>\u003C/pre>\n\n\u003Ch2 id=\"button\" class=\"h2-underlined\">Button\u003C/h2>\n\n\u003Cp>Fügen wir nun etwas Logik hinzu und ändern das angezeigte Icon mit einem Klick auf einem Button:\u003C/p>\n\u003Cp>\u003Cimg src=\"/images/desklet-tutorial/button.png\" alt=\"Button Desklet\" title=\"Button Desklet\">\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Desklet\u003C/span> = imports.\u003Cspan class=\"hljs-property\">ui\u003C/span>.\u003Cspan class=\"hljs-property\">desklet\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">St\u003C/span>;\n\n\u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span> \u003Cspan class=\"hljs-keyword\">extends\u003C/span> \u003Cspan class=\"hljs-title class_ inherited__\">Desklet.Desklet\u003C/span> {\n  \u003Cspan class=\"hljs-title function_\">constructor\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n    \u003Cspan class=\"hljs-variable language_\">super\u003C/span>(metadata, deskletId);\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">iconName\u003C/span> = \u003Cspan class=\"hljs-string\">&quot;face-smile-symbolic&quot;\u003C/span>;\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setHeader\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Tutorial Desklet&quot;\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>();\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> box = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">BoxLayout\u003C/span>({ \u003Cspan class=\"hljs-attr\">vertical\u003C/span>: \u003Cspan class=\"hljs-literal\">true\u003C/span> });\n\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> label = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Label\u003C/span>({ \u003Cspan class=\"hljs-attr\">text\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Hello World!&quot;\u003C/span> });\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> icon = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Icon\u003C/span>({\n      \u003Cspan class=\"hljs-attr\">icon_name\u003C/span>: \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">iconName\u003C/span>,\n      \u003Cspan class=\"hljs-attr\">icon_type\u003C/span>: \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-property\">IconType\u003C/span>.\u003Cspan class=\"hljs-property\">SYMBOLIC\u003C/span>,\n      \u003Cspan class=\"hljs-attr\">icon_size\u003C/span>: \u003Cspan class=\"hljs-number\">32\u003C/span>,\n    });\n\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> button = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Button\u003C/span>({ \u003Cspan class=\"hljs-attr\">label\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Change Icon&quot;\u003C/span> });\n    button.\u003Cspan class=\"hljs-title function_\">connect\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;button-press-event&quot;\u003C/span>, \u003Cspan class=\"hljs-function\">() =&gt;\u003C/span> \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_changeIcon\u003C/span>());\n\n    box.\u003Cspan class=\"hljs-title function_\">add_child\u003C/span>(label);\n    box.\u003Cspan class=\"hljs-title function_\">add_child\u003C/span>(icon);\n    box.\u003Cspan class=\"hljs-title function_\">add_child\u003C/span>(button);\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setContent\u003C/span>(box);\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_changeIcon\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">iconName\u003C/span> = \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">iconName\u003C/span> === \u003Cspan class=\"hljs-string\">&quot;face-smile-symbolic&quot;\u003C/span> ? \u003Cspan class=\"hljs-string\">&quot;face-sad-symbolic&quot;\u003C/span> : \u003Cspan class=\"hljs-string\">&quot;face-smile-symbolic&quot;\u003C/span>;\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>();\n  }\n}\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">main\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span>(metadata, deskletId);\n}\u003C/code>\u003C/pre>\n\n\u003Cp>Nun wird der Smiley traurig, wenn wir den Button &quot;Change Icon&quot; drücken.\u003C/p>\n\u003Ch2 id=\"styling\" class=\"h2-underlined\">Styling\u003C/h2>\n\n\u003Cp>\u003Cimg src=\"/images/desklet-tutorial/styling.png\" alt=\"Styling Desklet\" title=\"Styling Desklet\">\u003C/p>\n\u003Cp>Den Elementen aus dem \u003Ca href=\"https://gnome.pages.gitlab.gnome.org/gnome-shell/st/index.html\" title=\"\" target=\"_blank\" rel=\"noopener noreferrer\">Shell Toolkit\u003C/a> können wir eine \u003Ccode>style_class\u003C/code> hinzufügen.\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> label = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Label\u003C/span>({ \u003Cspan class=\"hljs-attr\">text\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Hello World!&quot;\u003C/span>, \u003Cspan class=\"hljs-attr\">style_class\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;tutorial-desklet-label&quot;\u003C/span> });\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> button = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Button\u003C/span>({ \u003Cspan class=\"hljs-attr\">label\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Change Icon&quot;\u003C/span>, \u003Cspan class=\"hljs-attr\">style_class\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;tutorial-desklet-button&quot;\u003C/span> });\u003C/code>\u003C/pre>\n\n\u003Cp>Anschließend können wir die Elemente in der \u003Ccode>stylesheet.css\u003C/code> mit CSS anpassen:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-css\">\u003Cspan class=\"hljs-selector-class\">.tutorial-desklet-label\u003C/span> {\n  \u003Cspan class=\"hljs-attribute\">font-size\u003C/span>: \u003Cspan class=\"hljs-number\">2em\u003C/span>;\n  \u003Cspan class=\"hljs-attribute\">color\u003C/span>: green;\n}\n\n\u003Cspan class=\"hljs-selector-class\">.tutorial-desklet-button\u003C/span> {\n  \u003Cspan class=\"hljs-attribute\">padding\u003C/span>: \u003Cspan class=\"hljs-number\">0.5em\u003C/span>;\n  \u003Cspan class=\"hljs-attribute\">border\u003C/span>: solid \u003Cspan class=\"hljs-number\">1px\u003C/span> \u003Cspan class=\"hljs-built_in\">rgb\u003C/span>(\u003Cspan class=\"hljs-number\">165\u003C/span>, \u003Cspan class=\"hljs-number\">161\u003C/span>, \u003Cspan class=\"hljs-number\">161\u003C/span>);\n  \u003Cspan class=\"hljs-attribute\">border-radius\u003C/span>: \u003Cspan class=\"hljs-number\">5px\u003C/span>;\n  \u003Cspan class=\"hljs-attribute\">margin-top\u003C/span>: \u003Cspan class=\"hljs-number\">1em\u003C/span>;\n}\n\n\u003Cspan class=\"hljs-selector-class\">.tutorial-desklet-button\u003C/span>\u003Cspan class=\"hljs-selector-pseudo\">:hover\u003C/span> {\n  \u003Cspan class=\"hljs-attribute\">background-color\u003C/span>: \u003Cspan class=\"hljs-built_in\">rgb\u003C/span>(\u003Cspan class=\"hljs-number\">173\u003C/span>, \u003Cspan class=\"hljs-number\">173\u003C/span>, \u003Cspan class=\"hljs-number\">173\u003C/span>);\n}\u003C/code>\u003C/pre>\n\n\u003Cp>Einige Änderungen in der \u003Ccode>stylesheet.css\u003C/code> werden erst nach einem Neustart des Cinnamon Desktops sichtbar. Dazu auf der Taskleiste mit der rechten Maustaste klicken und unter &quot;Fehler suchen&quot; &quot;Cinnamon neustarten&quot; auswählen.\u003C/p>\n\u003Cp>Der Style kann auch per JavaScript angepasst werden:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">label.\u003Cspan class=\"hljs-property\">style\u003C/span> = \u003Cspan class=\"hljs-string\">`font-size: 2em; color: green;`\u003C/span>;\nlabel.\u003Cspan class=\"hljs-title function_\">set_style\u003C/span>(\u003Cspan class=\"hljs-string\">`font-size: \u003Cspan class=\"hljs-subst\">${\u003Cspan class=\"hljs-variable language_\">this\u003C/span>.labelFontSize}\u003C/span>px;`\u003C/span>);\u003C/code>\u003C/pre>\n\n\u003Cp>Das CSS ist nur rudimentär implementiert. Es funktionieren nur grundlegende Dinge, wie margin, padding, color, border oder font-size. Alles was das Layout betrifft wird über das \u003Ca href=\"/de/blogpost/desklet-tutorial/#box-layout\" title=\"\">Box-Layout\u003C/a> gesteuert. Flexbox funktioniert nicht.\u003C/p>\n\u003Ch3>Hover-Effekte\u003C/h3>\n\u003Cp>Hover-Effekte funktionieren für Buttons. Wenn andere Elemente mit einem Hover-Effekt versehen werden sollen, muss das Shell Toolkit Element angepasst werden mit dem Parameter \u003Ccode>track_hover\u003C/code> und \u003Ccode>reactive\u003C/code>:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> box = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">BoxLayout\u003C/span>({ \u003Cspan class=\"hljs-attr\">style_class\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;tutorial-desklet-box&quot;\u003C/span>, \u003Cspan class=\"hljs-attr\">reactive\u003C/span>: \u003Cspan class=\"hljs-literal\">true\u003C/span>, \u003Cspan class=\"hljs-attr\">track_hover\u003C/span>: \u003Cspan class=\"hljs-literal\">true\u003C/span> });\u003C/code>\u003C/pre>\n\n\u003Ch2 id=\"settings\" class=\"h2-underlined\">Settings\u003C/h2>\n\n\u003Cp>Die Einstellungen des Desklets werden in der \u003Ccode>settings-schema.json\u003C/code> definiert.\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-json\">\u003Cspan class=\"hljs-punctuation\">{\u003C/span>\n  \u003Cspan class=\"hljs-attr\">&quot;head0&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-punctuation\">{\u003C/span>\n    \u003Cspan class=\"hljs-attr\">&quot;type&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;header&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n    \u003Cspan class=\"hljs-attr\">&quot;description&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;Style&quot;\u003C/span>\n  \u003Cspan class=\"hljs-punctuation\">}\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n  \u003Cspan class=\"hljs-attr\">&quot;label-font-size&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-punctuation\">{\u003C/span>\n    \u003Cspan class=\"hljs-attr\">&quot;type&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;scale&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n    \u003Cspan class=\"hljs-attr\">&quot;default&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-number\">20\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n    \u003Cspan class=\"hljs-attr\">&quot;min&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-number\">12\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n    \u003Cspan class=\"hljs-attr\">&quot;max&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-number\">60\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n    \u003Cspan class=\"hljs-attr\">&quot;step&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-number\">1\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n    \u003Cspan class=\"hljs-attr\">&quot;description&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;Font size&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">,\u003C/span>\n    \u003Cspan class=\"hljs-attr\">&quot;tooltip&quot;\u003C/span>\u003Cspan class=\"hljs-punctuation\">:\u003C/span> \u003Cspan class=\"hljs-string\">&quot;The font size of the label.&quot;\u003C/span>\n  \u003Cspan class=\"hljs-punctuation\">}\u003C/span>\n\u003Cspan class=\"hljs-punctuation\">}\u003C/span>\u003C/code>\u003C/pre>\n\n\u003Cp>Die Settings API ist \u003Ca href=\"https://projects.linuxmint.com/reference/git/cinnamon-tutorials/xlet-settings-ref.html\" title=\"\" target=\"_blank\" rel=\"noopener noreferrer\">dokumentiert\u003C/a>. Hier die wichtigsten Typen der Settings:\u003C/p>\n\u003Cul>\n\u003Cli>entry\u003C/li>\n\u003Cli>checkbox\u003C/li>\n\u003Cli>scale\u003C/li>\n\u003Cli>combobox\u003C/li>\n\u003Cli>spinbutton\u003C/li>\n\u003Cli>filechooser\u003C/li>\n\u003Cli>colorchooser\u003C/li>\n\u003Cli>datechooser\u003C/li>\n\u003C/ul>\n\u003Cp>Es wird ein neuer Import benötigt und die Einstellungen müssen gebunden werden.\u003C/p>\n\u003Cp>Hier ein einfaches Hello World-Desklet, bei dem die Schriftgröße geändert werden kann:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Desklet\u003C/span> = imports.\u003Cspan class=\"hljs-property\">ui\u003C/span>.\u003Cspan class=\"hljs-property\">desklet\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">St\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Settings\u003C/span> = imports.\u003Cspan class=\"hljs-property\">ui\u003C/span>.\u003Cspan class=\"hljs-property\">settings\u003C/span>;\n\n\u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span> \u003Cspan class=\"hljs-keyword\">extends\u003C/span> \u003Cspan class=\"hljs-title class_ inherited__\">Desklet.Desklet\u003C/span> {\n  \u003Cspan class=\"hljs-title function_\">constructor\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n    \u003Cspan class=\"hljs-variable language_\">super\u003C/span>(metadata, deskletId);\n\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> settings = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">Settings\u003C/span>.\u003Cspan class=\"hljs-title class_\">DeskletSettings\u003C/span>(\u003Cspan class=\"hljs-variable language_\">this\u003C/span>, metadata[\u003Cspan class=\"hljs-string\">&quot;uuid&quot;\u003C/span>], deskletId);\n    settings.\u003Cspan class=\"hljs-title function_\">bindProperty\u003C/span>(\u003Cspan class=\"hljs-title class_\">Settings\u003C/span>.\u003Cspan class=\"hljs-property\">BindingDirection\u003C/span>.\u003Cspan class=\"hljs-property\">IN\u003C/span>, \u003Cspan class=\"hljs-string\">&quot;label-font-size&quot;\u003C/span>, \u003Cspan class=\"hljs-string\">&quot;labelFontSize&quot;\u003C/span>, \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">_setupLayout\u003C/span>.\u003Cspan class=\"hljs-title function_\">bind\u003C/span>(\u003Cspan class=\"hljs-variable language_\">this\u003C/span>));\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setHeader\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Tutorial Desklet&quot;\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>();\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> label = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Label\u003C/span>({ \u003Cspan class=\"hljs-attr\">text\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Hello World!&quot;\u003C/span>, \u003Cspan class=\"hljs-attr\">style_class\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;tutorial-desklet-label&quot;\u003C/span> });\n    label.\u003Cspan class=\"hljs-title function_\">set_style\u003C/span>(\u003Cspan class=\"hljs-string\">`font-size: \u003Cspan class=\"hljs-subst\">${\u003Cspan class=\"hljs-variable language_\">this\u003C/span>.labelFontSize}\u003C/span>px;`\u003C/span>);\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setContent\u003C/span>(label);\n  }\n}\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">main\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span>(metadata, deskletId);\n}\u003C/code>\u003C/pre>\n\n\u003Ch2 id=\"images\" class=\"h2-underlined\">Images\u003C/h2>\n\n\u003Cp>\u003Cimg src=\"/images/desklet-tutorial/image.png\" alt=\"Image Desklet\" title=\"Image Desklet\">\u003C/p>\n\u003Cp>Um Bilder anzuzeigen brauchen wir Hilfsfunktionen und drei weitere Importe.\u003C/p>\n\u003Cp>Hier eine Desklet, welches nur ein Bild anzeigt:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Desklet\u003C/span> = imports.\u003Cspan class=\"hljs-property\">ui\u003C/span>.\u003Cspan class=\"hljs-property\">desklet\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">St\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">GdkPixbuf\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">GdkPixbuf\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Clutter\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">Clutter\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Cogl\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">Cogl\u003C/span>;\n\n\u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span> \u003Cspan class=\"hljs-keyword\">extends\u003C/span> \u003Cspan class=\"hljs-title class_ inherited__\">Desklet.Desklet\u003C/span> {\n  \u003Cspan class=\"hljs-title function_\">constructor\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n    \u003Cspan class=\"hljs-variable language_\">super\u003C/span>(metadata, deskletId);\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setHeader\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Tutorial Desklet&quot;\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>();\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> image = \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_getImageAtScale\u003C/span>(\u003Cspan class=\"hljs-string\">`\u003Cspan class=\"hljs-subst\">${\u003Cspan class=\"hljs-variable language_\">this\u003C/span>.metadata.path}\u003C/span>/images/cat.jpg`\u003C/span>, \u003Cspan class=\"hljs-number\">200\u003C/span>, \u003Cspan class=\"hljs-number\">300\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setContent\u003C/span>(image);\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_createActorFromPixbuf\u003C/span>(\u003Cspan class=\"hljs-params\">pixBuf\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> pixelFormat = pixBuf.\u003Cspan class=\"hljs-title function_\">get_has_alpha\u003C/span>() ? \u003Cspan class=\"hljs-title class_\">Cogl\u003C/span>.\u003Cspan class=\"hljs-property\">PixelFormat\u003C/span>.\u003Cspan class=\"hljs-property\">RGBA_8888\u003C/span> : \u003Cspan class=\"hljs-title class_\">Cogl\u003C/span>.\u003Cspan class=\"hljs-property\">PixelFormat\u003C/span>.\u003Cspan class=\"hljs-property\">RGB_888\u003C/span>;\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> image = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">Clutter\u003C/span>.\u003Cspan class=\"hljs-title class_\">Image\u003C/span>();\n    image.\u003Cspan class=\"hljs-title function_\">set_data\u003C/span>(pixBuf.\u003Cspan class=\"hljs-title function_\">get_pixels\u003C/span>(), pixelFormat, pixBuf.\u003Cspan class=\"hljs-title function_\">get_width\u003C/span>(), pixBuf.\u003Cspan class=\"hljs-title function_\">get_height\u003C/span>(), pixBuf.\u003Cspan class=\"hljs-title function_\">get_rowstride\u003C/span>());\n\n    \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">Clutter\u003C/span>.\u003Cspan class=\"hljs-title class_\">Actor\u003C/span>({\n      \u003Cspan class=\"hljs-attr\">content\u003C/span>: image,\n      \u003Cspan class=\"hljs-attr\">width\u003C/span>: pixBuf.\u003Cspan class=\"hljs-title function_\">get_width\u003C/span>(),\n      \u003Cspan class=\"hljs-attr\">height\u003C/span>: pixBuf.\u003Cspan class=\"hljs-title function_\">get_height\u003C/span>(),\n    });\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_getImageAtScale\u003C/span>(\u003Cspan class=\"hljs-params\">imageFilePath, requestedWidth, requestedHeight\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">try\u003C/span> {\n      \u003Cspan class=\"hljs-keyword\">const\u003C/span> pixBuf = \u003Cspan class=\"hljs-title class_\">GdkPixbuf\u003C/span>.\u003Cspan class=\"hljs-property\">Pixbuf\u003C/span>.\u003Cspan class=\"hljs-title function_\">new_from_file_at_size\u003C/span>(imageFilePath, requestedWidth, requestedHeight);\n      \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_createActorFromPixbuf\u003C/span>(pixBuf);\n    } \u003Cspan class=\"hljs-keyword\">catch\u003C/span> (e) {\n      \u003Cspan class=\"hljs-variable language_\">global\u003C/span>.\u003Cspan class=\"hljs-title function_\">logError\u003C/span>(\u003Cspan class=\"hljs-string\">`Error loading image \u003Cspan class=\"hljs-subst\">${imageFilePath}\u003C/span>: \u003Cspan class=\"hljs-subst\">${e}\u003C/span>`\u003C/span>);\n      \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Label\u003C/span>({ \u003Cspan class=\"hljs-attr\">text\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Error&quot;\u003C/span> });\n    }\n  }\n}\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">main\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span>(metadata, deskletId);\n}\u003C/code>\u003C/pre>\n\n\u003Ch2 id=\"mainloop\" class=\"h2-underlined\">Mainloop\u003C/h2>\n\n\u003Cp>\u003Cimg src=\"/images/desklet-tutorial/counter.png\" alt=\"Counter Desklet\" title=\"Counter Desklet\">\u003C/p>\n\u003Cp>Für den Aufruf von Funktionen nach einer bestimmten Zeitspanne gibt es die Mainloop.\nMit dieser können wir einen Timeout setzen und eine Funktion übergeben, die nach dem Timeout ausgeführt wird.\u003C/p>\n\u003Cp>Hier ein einfaches Desklet, welches alle 5 Sekunden einen Counter hochzählt:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Desklet\u003C/span> = imports.\u003Cspan class=\"hljs-property\">ui\u003C/span>.\u003Cspan class=\"hljs-property\">desklet\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">St\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Mainloop\u003C/span> = imports.\u003Cspan class=\"hljs-property\">mainloop\u003C/span>;\n\n\u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span> \u003Cspan class=\"hljs-keyword\">extends\u003C/span> \u003Cspan class=\"hljs-title class_ inherited__\">Desklet.Desklet\u003C/span> {\n  \u003Cspan class=\"hljs-title function_\">constructor\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n    \u003Cspan class=\"hljs-variable language_\">super\u003C/span>(metadata, deskletId);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">counter\u003C/span> = \u003Cspan class=\"hljs-number\">0\u003C/span>;\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setHeader\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Tutorial Desklet&quot;\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_updateCounter\u003C/span>();\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_updateCounter\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">if\u003C/span> (\u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">timeout\u003C/span>) \u003Cspan class=\"hljs-title class_\">Mainloop\u003C/span>.\u003Cspan class=\"hljs-title function_\">source_remove\u003C/span>(\u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">timeout\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">timeout\u003C/span> = \u003Cspan class=\"hljs-title class_\">Mainloop\u003C/span>.\u003Cspan class=\"hljs-title function_\">timeout_add_seconds\u003C/span>(\u003Cspan class=\"hljs-number\">5\u003C/span>, \u003Cspan class=\"hljs-function\">() =&gt;\u003C/span> \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_updateCounter\u003C/span>());\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">counter\u003C/span>++;\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>();\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> label = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Label\u003C/span>({ \u003Cspan class=\"hljs-attr\">text\u003C/span>: \u003Cspan class=\"hljs-string\">`Counter: \u003Cspan class=\"hljs-subst\">${\u003Cspan class=\"hljs-variable language_\">this\u003C/span>.counter}\u003C/span>`\u003C/span> });\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setContent\u003C/span>(label);\n  }\n\n  \u003Cspan class=\"hljs-title function_\">on_desklet_removed\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">if\u003C/span> (\u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">_timeout\u003C/span>) \u003Cspan class=\"hljs-title class_\">Mainloop\u003C/span>.\u003Cspan class=\"hljs-title function_\">source_remove\u003C/span>(\u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">_timeout\u003C/span>);\n  }\n}\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">main\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span>(metadata, deskletId);\n}\u003C/code>\u003C/pre>\n\n\u003Cp>Der Timeout kann auch in Millisekunden gesetzt werden:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-property\">timeout\u003C/span> = \u003Cspan class=\"hljs-title class_\">Mainloop\u003C/span>.\u003Cspan class=\"hljs-title function_\">timeout_add\u003C/span>(\u003Cspan class=\"hljs-number\">300\u003C/span>, \u003Cspan class=\"hljs-function\">() =&gt;\u003C/span> \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_updateCounter\u003C/span>());\u003C/code>\u003C/pre>\n\n\u003Ch2 id=\"translation\" class=\"h2-underlined\">Übersetzung\u003C/h2>\n\n\u003Cp>Für die Übersetzung brauchen wir etwas Boilerplate:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">GLib\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">GLib\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Gettext\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gettext\u003C/span>;\n\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-variable constant_\">UUID\u003C/span> = \u003Cspan class=\"hljs-string\">&quot;tutorial-desklet@KopfdesDaemons&quot;\u003C/span>;\n\n\u003Cspan class=\"hljs-title class_\">Gettext\u003C/span>.\u003Cspan class=\"hljs-title function_\">bindtextdomain\u003C/span>(\u003Cspan class=\"hljs-variable constant_\">UUID\u003C/span>, \u003Cspan class=\"hljs-title class_\">GLib\u003C/span>.\u003Cspan class=\"hljs-title function_\">get_home_dir\u003C/span>() + \u003Cspan class=\"hljs-string\">&quot;/.local/share/locale&quot;\u003C/span>);\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">_\u003C/span>(\u003Cspan class=\"hljs-params\">str\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-title class_\">Gettext\u003C/span>.\u003Cspan class=\"hljs-title function_\">dgettext\u003C/span>(\u003Cspan class=\"hljs-variable constant_\">UUID\u003C/span>, str);\n}\u003C/code>\u003C/pre>\n\n\u003Cp>Mit diesem Code können wir die Übersetzungen mit der Funktion \u003Ccode>_()\u003C/code> verwenden.\u003C/p>\n\u003Cp>Hier ein Beispielaufruf einer Übersetzung:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> label = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Label\u003C/span>({ \u003Cspan class=\"hljs-attr\">text\u003C/span>: \u003Cspan class=\"hljs-title function_\">_\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Hello World!&quot;\u003C/span>) });\u003C/code>\u003C/pre>\n\n\u003Ch3>Übersetzung extrahieren\u003C/h3>\n\u003Cp>Mit dem folgendem Befehl wird eine \u003Ccode>.pot\u003C/code>-Datei im Ordner \u003Ccode>po\u003C/code> erstellt, welche die zu übersetzenden Texte enthält:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-bash\">./cinnamon-spices-makepot tutorial-desklet@KopfdesDaemons\u003C/code>\u003C/pre>\n\n\u003Cp>Diese Datei können wir mit einem Programm wie \u003Ca href=\"https://poedit.net/\" title=\"\" target=\"_blank\" rel=\"noopener noreferrer\">Poedit\u003C/a> öffnen, um Übersetzungen hinzuzufügen.\u003C/p>\n\u003Cp>Die Übersetzung speichern wir z.B. als \u003Ccode>de.po\u003C/code> für die deutsche Sprache. Die \u003Ccode>.mo\u003C/code>-Datei muss gelöscht werden.\u003C/p>\n\u003Cp>Mit diesem Befehl können wir die Übersetzung installieren und testen:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-bash\">./cinnamon-spices-makepot tutorial-desklet@KopfdesDaemons --install\u003C/code>\u003C/pre>\n\n\u003Cp>Hier ein Hello World-Desklet mit Übersetzung:\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-ts\">\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Desklet\u003C/span> = imports.\u003Cspan class=\"hljs-property\">ui\u003C/span>.\u003Cspan class=\"hljs-property\">desklet\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">St\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">GLib\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gi\u003C/span>.\u003Cspan class=\"hljs-property\">GLib\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title class_\">Gettext\u003C/span> = imports.\u003Cspan class=\"hljs-property\">gettext\u003C/span>;\n\n\u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-variable constant_\">UUID\u003C/span> = \u003Cspan class=\"hljs-string\">&quot;tutorial-desklet@KopfdesDaemons&quot;\u003C/span>;\n\n\u003Cspan class=\"hljs-title class_\">Gettext\u003C/span>.\u003Cspan class=\"hljs-title function_\">bindtextdomain\u003C/span>(\u003Cspan class=\"hljs-variable constant_\">UUID\u003C/span>, \u003Cspan class=\"hljs-title class_\">GLib\u003C/span>.\u003Cspan class=\"hljs-title function_\">get_home_dir\u003C/span>() + \u003Cspan class=\"hljs-string\">&quot;/.local/share/locale&quot;\u003C/span>);\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">_\u003C/span>(\u003Cspan class=\"hljs-params\">str\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-title class_\">Gettext\u003C/span>.\u003Cspan class=\"hljs-title function_\">dgettext\u003C/span>(\u003Cspan class=\"hljs-variable constant_\">UUID\u003C/span>, str);\n}\n\n\u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span> \u003Cspan class=\"hljs-keyword\">extends\u003C/span> \u003Cspan class=\"hljs-title class_ inherited__\">Desklet.Desklet\u003C/span> {\n  \u003Cspan class=\"hljs-title function_\">constructor\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n    \u003Cspan class=\"hljs-variable language_\">super\u003C/span>(metadata, deskletId);\n\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setHeader\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Tutorial Desklet&quot;\u003C/span>);\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>();\n  }\n\n  \u003Cspan class=\"hljs-title function_\">_setupLayout\u003C/span>(\u003Cspan class=\"hljs-params\">\u003C/span>) {\n    \u003Cspan class=\"hljs-keyword\">const\u003C/span> label = \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">St\u003C/span>.\u003Cspan class=\"hljs-title class_\">Label\u003C/span>({ \u003Cspan class=\"hljs-attr\">text\u003C/span>: \u003Cspan class=\"hljs-title function_\">_\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Hello World!&quot;\u003C/span>) });\n    \u003Cspan class=\"hljs-variable language_\">this\u003C/span>.\u003Cspan class=\"hljs-title function_\">setContent\u003C/span>(label);\n  }\n}\n\n\u003Cspan class=\"hljs-keyword\">function\u003C/span> \u003Cspan class=\"hljs-title function_\">main\u003C/span>(\u003Cspan class=\"hljs-params\">metadata, deskletId\u003C/span>) {\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">MyDesklet\u003C/span>(metadata, deskletId);\n}\u003C/code>\u003C/pre>"},"__nghData__":[{},{"t":{"3":"t50","11":"t51","14":"t52","15":"t53"},"c":{"3":[{"i":"t50","r":1}],"11":[],"14":[{"i":"t52","r":1}],"15":[{"i":"t53","r":4,"t":{"0":"t54","1":"t55","2":"t56"},"c":{"0":[],"1":[],"2":[{"i":"t55","r":1,"s":0}]}}]}},{"t":{"41":"t11","42":"t12"},"c":{"41":[],"42":[]}},{"t":{"0":"t0","1":"t1","4":"t2","5":"t3"},"c":{"0":[],"1":[{"i":"t0","r":1,"di":"d0","s":2}],"4":[],"5":[],"8":[{"i":"c360178244","r":1}]}}],"__nghDeferData__":{"d0":{"r":1,"s":2}}}</script></body></html>