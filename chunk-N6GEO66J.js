import{a as Q}from"./chunk-NF75JOAI.js";import{a as G,b as J,c as K}from"./chunk-DMB4GUYT.js";import"./chunk-NXV2PJFV.js";import{a as V}from"./chunk-4TLW7FTG.js";import"./chunk-74B255KG.js";import{b as j,c as H,d as A}from"./chunk-LGVXDRNZ.js";import{c as $,g as k,h as q,n as z,p as N,q as R}from"./chunk-DB6AOJU4.js";import"./chunk-NCU52XL5.js";import{Ab as f,Bb as a,Cb as r,Db as T,Jb as L,Lb as d,Na as o,Ob as p,Pb as g,Qb as w,Sb as E,Ub as F,Vb as I,Wb as D,Xa as v,Xb as m,Yb as u,Z as c,ab as O,ma as y,nb as S,pb as M,qb as b,s as P,ub as _,vb as h,wb as B,yb as x,zb as C}from"./chunk-P6XYFBVA.js";var W=()=>[import("./chunk-GWWYGEET.js").then(t=>t.BlogpostCardComponent)],X=()=>[],Y=t=>[t],Z=(t,i)=>({sortBy:t,sortOrder:i}),tt=(t,i)=>i.postMeta.description;function et(t,i){if(t&1&&T(0,"app-blogpost-card",8),t&2){let s=d().$implicit;f("postMeta",s.postMeta)}}function it(t,i){t&1&&(a(0,"li"),O(1,et,1,1),S(2,1,W,null,null,null,null,null,null,1),M(),b(),r())}function nt(t,i){if(t&1&&(a(0,"a",9),p(1),r()),t&2){let s=d().$index,e=d(2);f("routerLink",I(3,Y,"/"+e.languageS.userLanguage()+"/blog/page/"+(s+1)+"/."))("queryParams",D(5,Z,e.sortBy,e.sortOrder)),o(),w("",s+1," ")}}function ot(t,i){if(t&1&&(a(0,"span"),p(1),r()),t&2){let s=d().$index;o(),g(s+1)}}function at(t,i){if(t&1&&(a(0,"li"),_(1,nt,2,8,"a",9),_(2,ot,2,1,"span"),r()),t&2){let s=i.$index,e=d(2);o(),h(e.currentPage!=s+1?1:-1),o(),h(e.currentPage===s+1?2:-1)}}function rt(t,i){if(t&1&&(a(0,"ul",7),x(1,at,3,2,"li",null,B),r()),t&2){let s=d();o(),C(F(0,X).constructor(s.totalPages))}}var vt=(()=>{let i=class i{constructor(){this.postS=c(Q),this.languageS=c(V),this.route=c(z),this.router=c(N),this.title=c(q),this.meta=c(k),this.translate=c(j),this.postsList=y([]),this.currentPage=1,this.pageSize=5,this.sortOrder="desc",this.sortBy="date",this.totalPages=1}ngOnInit(){this.routeParamsSubscription=this.route.params.subscribe(async e=>{let{page:n}=e;n&&(this.currentPage=Number(n)),await this.loadPostsList()}),this.queryParamsSubscription=this.route.queryParams.subscribe(async e=>{let{sortBy:n,sortOrder:l}=e;(n==="date"||n==="title")&&(this.sortBy=n),(l==="asc"||l==="desc")&&(this.sortOrder=l),await this.loadPostsList()})}ngOnDestroy(){this.routeParamsSubscription?.unsubscribe(),this.queryParamsSubscription?.unsubscribe()}async setMetaTags(){let e=await P(this.translate.get("blog_h1"));this.title.setTitle(e),this.meta.addTag({name:"description",content:e})}async loadPostsList(){try{let{posts:e,totalPages:n}=await this.postS.loadPostList(this.languageS.userLanguage(),this.currentPage,this.pageSize,this.sortOrder,this.sortBy);this.postsList.set(e),this.totalPages=n,await this.setMetaTags()}catch(e){console.error(e),e instanceof $&&e.status===404&&this.languageS.userLanguage()!=="en"&&await this.postS.loadPostList("en",this.currentPage,this.pageSize,this.sortOrder,this.sortBy)}}async sort(e){let[n,l]=e.target.value.split(" ");await this.router.navigate([`/${this.languageS.userLanguage()}/blog/page/1`],{queryParams:{sortBy:n,sortOrder:l}})}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v({type:i,selectors:[["app-blog"]],decls:23,vars:19,consts:[[1,"options"],[3,"change","value"],["value","date desc"],["value","date asc"],["value","title asc"],["value","title desc"],[1,"feed"],[1,"pagination"],[3,"postMeta"],[3,"routerLink","queryParams"]],template:function(n,l){n&1&&(a(0,"main")(1,"section")(2,"h1"),p(3),m(4,"translate"),r(),a(5,"div",0)(6,"select",1),L("change",function(U){return l.sort(U)}),a(7,"option",2),p(8),m(9,"translate"),r(),a(10,"option",3),p(11),m(12,"translate"),r(),a(13,"option",4),p(14),m(15,"translate"),r(),a(16,"option",5),p(17),m(18,"translate"),r()()(),a(19,"ul",6),x(20,it,4,0,"li",null,tt),r(),_(22,rt,3,1,"ul",7),r()()),n&2&&(o(3),g(u(4,9,"blog_h1")),o(3),f("value",E("",l.sortBy," ",l.sortOrder)),o(2),g(u(9,11,"date_desc")),o(3),g(u(12,13,"date_asc")),o(3),g(u(15,15,"title_asc")),o(3),g(u(18,17,"title_desc")),o(3),C(l.postsList()),o(2),h(l.totalPages>1?22:-1))},dependencies:[K,G,J,R,A,H],styles:["[_nghost-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:stretch}main[_ngcontent-%COMP%]{margin-bottom:auto;padding:3em 0 5em;background:var(--gradient)}section[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;padding:0 6vw;max-width:80em;margin:0 auto;width:100%;box-sizing:border-box}h1[_ngcontent-%COMP%]{font-size:clamp(34px,4vw,60px)}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}.options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5em;border:2px solid lightgrey;border-radius:.5rem;color:#000;background-color:#fff;min-width:5em}.feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding:0;flex:1}.feed[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5em;padding:0;font-size:1.3em}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5em}"],changeDetection:0});let t=i;return t})();export{vt as BlogComponent};
