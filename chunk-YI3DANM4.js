import{a as st}from"./chunk-N4E2VVKY.js";import"./chunk-YFVWPDYZ.js";import{a as X,b as Y,c as tt,d as et,e as nt,f as it,g as ot,h as at,i as rt}from"./chunk-27JBSE44.js";import{a as U}from"./chunk-TVT6NLNC.js";import"./chunk-MRP2LEQ3.js";import{b as Z,c as J,d as K}from"./chunk-KK2A4E5N.js";import{c as R,g as W,h as j,n as A,p as G,q as H}from"./chunk-AHQAFESL.js";import"./chunk-LOFVFHXP.js";import{$ as v,Ab as M,Eb as F,Gb as y,Ib as c,Ma as r,Mb as p,Nb as d,Ob as k,Pb as D,Qb as N,Rb as I,Tb as $,U as l,Vb as z,Wb as V,Xb as u,Yb as m,Za as w,_ as O,aa as S,cb as T,ka as B,kb as L,mb as q,nb as E,q as b,rb as f,sb as C,tb as Q,vb as P,wb as x,xb as h,yb as o,zb as a}from"./chunk-5C5RMVSW.js";var lt=()=>[import("./chunk-ZLXXC5WK.js").then(e=>e.BlogpostCardComponent)],ct=()=>[],pt=e=>[e],gt=(e,s)=>s.postMeta.description;function dt(e,s){if(e&1){let t=F();o(0,"button",11),y("click",function(){O(t);let i=c();return i.searchQuery="",v(i.search())}),S(),o(1,"svg",12),M(2,"path",13),a()()}}function ut(e,s){if(e&1&&M(0,"app-blogpost-card",14),e&2){let t=c().$implicit;h("postMeta",t.postMeta)}}function mt(e,s){e&1&&(o(0,"li"),T(1,ut,1,1),L(2,1,lt,null,null,null,null,null,null,1),q(),E(),a())}function ht(e,s){if(e&1&&(o(0,"a",15),p(1),a()),e&2){let t=c().$index,n=c(2);h("routerLink",V(3,pt,"/"+n.languageS.userLanguage()+"/blog/page/"+(t+1)+"/."))("queryParams",n.getQueryParams()),r(),k("",t+1," ")}}function _t(e,s){if(e&1&&(o(0,"span"),p(1),a()),e&2){let t=c().$index;r(),d(t+1)}}function ft(e,s){if(e&1&&(o(0,"li"),f(1,ht,2,5,"a",15)(2,_t,2,1,"span"),a()),e&2){let t=s.$index,n=c(2);r(),C(n.currentPage!==t+1?1:2)}}function Ct(e,s){if(e&1&&(o(0,"ul",10),P(1,ft,3,1,"li",null,Q),a()),e&2){let t=c();r(),x(z(0,ct).constructor(t.totalPages))}}var Qt=(()=>{class e{constructor(){this.postS=l(st),this.languageS=l(U),this.route=l(A),this.router=l(G),this.title=l(j),this.meta=l(W),this.translate=l(Z),this.postsList=B([],{}),this.currentPage=1,this.pageSize=5,this.sortOrder="desc",this.sortBy="date",this.totalPages=1,this.searchQuery=""}ngOnInit(){this.routeParamsSubscription=this.route.params.subscribe(async t=>{let{page:n}=t;n&&(this.currentPage=Number(n)),await this.loadPostsList()}),this.queryParamsSubscription=this.route.queryParams.subscribe(async t=>{let{sortBy:n,sortOrder:i,search:_}=t;(n==="date"||n==="title")&&(this.sortBy=n),(i==="asc"||i==="desc")&&(this.sortOrder=i),this.searchQuery=_||"",await this.loadPostsList()})}ngOnDestroy(){this.routeParamsSubscription?.unsubscribe(),this.queryParamsSubscription?.unsubscribe()}async setMetaTags(){let t=await b(this.translate.get("blog_h1"));this.title.setTitle(t),this.meta.addTag({name:"description",content:t})}async loadPostsList(){try{let{posts:t,totalPages:n}=await this.postS.loadPostList(this.languageS.userLanguage(),this.currentPage,this.pageSize,this.sortOrder,this.sortBy,[],"",this.searchQuery);this.postsList.set(t),this.totalPages=n,await this.setMetaTags()}catch(t){console.error(t),t instanceof R&&t.status===404&&this.languageS.userLanguage()!=="en"&&await this.postS.loadPostList("en",this.currentPage,this.pageSize,this.sortOrder,this.sortBy,[],"",this.searchQuery)}}getQueryParams(){let t={sortBy:this.sortBy,sortOrder:this.sortOrder};return this.searchQuery&&(t.search=this.searchQuery),t}async sort(t){let[n,i]=t.target.value.split(" ");this.sortBy=n,this.sortOrder=i,await this.router.navigate([`/${this.languageS.userLanguage()}/blog/page/1`],{queryParams:this.getQueryParams()})}async search(){await this.router.navigate([`/${this.languageS.userLanguage()}/blog/page/1`],{queryParams:this.getQueryParams()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=w({type:e,selectors:[["app-blog"]],decls:27,vars:24,consts:[[1,"options"],[1,"search",3,"submit"],["type","text","name","searchQuery",3,"ngModelChange","ngModel","placeholder"],["type","button"],[3,"change","value"],["value","date desc"],["value","date asc"],["value","title asc"],["value","title desc"],[1,"feed"],[1,"pagination"],["type","button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","width","24"],["fill","currentColor","d","m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"],[3,"postMeta"],[3,"routerLink","queryParams"]],template:function(n,i){n&1&&(o(0,"main")(1,"section")(2,"h1"),p(3),u(4,"translate"),a(),o(5,"div",0)(6,"form",1),y("submit",function(g){return g.preventDefault(),i.search()}),o(7,"input",2),u(8,"translate"),I("ngModelChange",function(g){return N(i.searchQuery,g)||(i.searchQuery=g),g}),a(),f(9,dt,3,0,"button",3),a(),o(10,"select",4),y("change",function(g){return i.sort(g)}),o(11,"option",5),p(12),u(13,"translate"),a(),o(14,"option",6),p(15),u(16,"translate"),a(),o(17,"option",7),p(18),u(19,"translate"),a(),o(20,"option",8),p(21),u(22,"translate"),a()()(),o(23,"ul",9),P(24,mt,4,0,"li",null,gt),a(),f(26,Ct,3,1,"ul",10),a()()),n&2&&(r(3),d(m(4,12,"blog_h1")),r(4),D("ngModel",i.searchQuery),h("placeholder",m(8,14,"search_post")),r(2),C(i.searchQuery.length>0?9:-1),r(),h("value",$("",i.sortBy," ",i.sortOrder)),r(2),d(m(13,16,"date_desc")),r(3),d(m(16,18,"date_asc")),r(3),d(m(19,20,"title_asc")),r(3),d(m(22,22,"title_desc")),r(3),x(i.postsList()),r(2),C(i.totalPages>1?26:-1))},dependencies:[rt,it,ot,at,X,Y,tt,nt,et,H,K,J],styles:["[_nghost-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:stretch}main[_ngcontent-%COMP%]{margin-bottom:auto;padding:3em 0 5em;background:var(--gradient)}section[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;padding:0 6vw;max-width:80em;margin:0 auto;width:100%;box-sizing:border-box}h1[_ngcontent-%COMP%]{font-size:clamp(34px,4vw,60px)}.options[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;gap:1em;width:100%;--background-input: rgb(36, 36, 41)}.options[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:inline;position:relative}.options[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:.5em;font-size:1.3em;border-radius:20px;border:none}.options[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;background-color:transparent;border:none}.options[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#797979;cursor:pointer}.options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5em;border:2px solid lightgrey;border-radius:.5rem;color:#000;background-color:#fff;min-width:5em}.feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding:0;flex:1}.feed[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5em;padding:0;font-size:1.3em}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5em}"],changeDetection:0})}}return e})();export{Qt as BlogComponent};
